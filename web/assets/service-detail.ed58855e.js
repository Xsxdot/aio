import{N as Be,t as Se,O as we,E as Ae,P as $e,_ as ke}from"./index.15381f0b.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as P,j as x,w as R,o as Z,C as v,D as S,aX as M,b as W,E as m,aI as s,aH as i,u as Q,aM as y,aE as I,aK as ye,aN as g,aF as oe,aJ as Le,a1 as ze,F as fe,aY as Te,bT as Ie,bU as Ne,ba as Ve,bt as Re,bY as Oe,bl as Me,bX as Ge,bO as He,bP as Ue,bS as Pe,bv as Ze,bx as qe,bQ as We,bA as je,bR as Xe,bs as Ye,bV as Je,bW as Ke,b2 as Qe}from"./arco.2804d378.js";import{h as et,f as tt}from"./vue.bbad6851.js";import{g as at}from"./service-monitor.22721c84.js";import{g as st}from"./distributed.0f0884be.js";import{v as re,w as Ee}from"./monitor.07efdc4f.js";import{u as j,b as ee,a as Fe,e as X,f as Y,g as te,l as ae,m as se,h as le,i as J,k as K,c as ut}from"./chart.100020e2.js";const nt={name:"ServiceCallsChart"},it=P({...nt,props:{serviceName:{},timeRange:{}},setup(N){j([ee,Fe,X,Y,te,ae,se,le,J]);const d=N,E=x(null);let t=null;const F=x(!1),n=x({timestamps:[],values:[]}),_=async()=>{if(!!d.serviceName){F.value=!0;try{const f=await re(`-${d.timeRange}`,void 0,!1,d.serviceName);if(f.series){const e=f.series.find(a=>a.name==="api.request.count");if(e&&e.points.length>0){const a=e.points.map(l=>typeof l.timestamp=="string"?l.timestamp:new Date(l.timestamp).toISOString()),r=e.points.map(l=>l.value);n.value={timestamps:a,values:r}}else n.value={timestamps:[],values:[]}}}catch(f){console.error("\u52A0\u8F7D\u670D\u52A1\u8C03\u7528\u6570\u636E\u5931\u8D25:",f),M.error("\u52A0\u8F7D\u670D\u52A1\u8C03\u7528\u6570\u636E\u5931\u8D25")}finally{F.value=!1}}},$=()=>{if(!E.value)return;t=K(E.value),p();const f=()=>{t==null||t.resize()};window.addEventListener("resize",f),W(()=>{window.removeEventListener("resize",f),t==null||t.dispose(),t=null})},p=()=>{if(!t)return;const f={title:{text:"\u670D\u52A1\u8C03\u7528\u91CF\u8D8B\u52BF",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:e=>{const a=e[0];return`${a.name}<br/>${a.seriesName}: ${a.value}`}},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{top:60,left:10,right:20,bottom:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n.value.timestamps.map(e=>{const a=new Date(e);return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`}),axisLabel:{fontSize:10}},yAxis:{type:"value",name:"\u8C03\u7528\u6B21\u6570",nameTextStyle:{fontSize:10},axisLabel:{fontSize:10}},series:[{name:"\u8C03\u7528\u6B21\u6570",type:"bar",data:n.value.values,itemStyle:{color:"#3370ff"},barWidth:"60%",emphasis:{focus:"series"}}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};t.setOption(f),t.hideLoading()};return R([()=>d.serviceName,()=>d.timeRange],()=>{_()}),R(()=>n.value,()=>{t&&(F.value?t.showLoading({text:"\u52A0\u8F7D\u4E2D...",color:"#3370ff",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)"}):p())},{deep:!0}),Z(()=>{$(),_()}),(f,e)=>(v(),S("div",{ref_key:"chartContainer",ref:E,style:{width:"100%",height:"100%"}},null,512))}}),ot={name:"ServiceResponseTimeChart"},lt=P({...ot,props:{serviceName:{},timeRange:{}},setup(N){j([ee,X,Y,te,ae,se,le,J]);const d=N,E=x(null);let t=null;const F=x(!1),n=x({timestamps:[],avgValues:[],maxValues:[],minValues:[]}),_=async()=>{if(!!d.serviceName){F.value=!0;try{const e=await re(`-${d.timeRange}`,void 0,!1,d.serviceName);if(e.series){const a=e.series.find(r=>r.name==="api.request.duration");if(a&&a.points.length>0){const r=a.points.map(b=>typeof b.timestamp=="string"?b.timestamp:new Date(b.timestamp).toISOString()),l=a.points.map(b=>b.value),w=l.map(b=>b*(1+Math.random()*.5)),O=l.map(b=>b*(1-Math.random()*.5));n.value={timestamps:r,avgValues:l,maxValues:w,minValues:O}}else n.value={timestamps:[],avgValues:[],maxValues:[],minValues:[]}}}catch(e){console.error("\u52A0\u8F7D\u670D\u52A1\u54CD\u5E94\u65F6\u95F4\u6570\u636E\u5931\u8D25:",e),M.error("\u52A0\u8F7D\u670D\u52A1\u54CD\u5E94\u65F6\u95F4\u6570\u636E\u5931\u8D25")}finally{F.value=!1}}},$=e=>e<1?"< 1ms":e<1e3?`${e.toFixed(0)}ms`:`${(e/1e3).toFixed(2)}s`,p=()=>{if(!E.value)return;t=K(E.value),f();const e=()=>{t==null||t.resize()};window.addEventListener("resize",e),W(()=>{window.removeEventListener("resize",e),t==null||t.dispose(),t=null})},f=()=>{if(!t)return;const e={title:{text:"\u670D\u52A1\u54CD\u5E94\u65F6\u95F4\u8D8B\u52BF",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:a=>{let r=`${a[0].name}<br/>`;return a.forEach(l=>{r+=`${l.seriesName}: ${$(l.value)}<br/>`}),r}},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},legend:{data:["\u5E73\u5747","\u6700\u5927","\u6700\u5C0F"],top:30,selectedMode:!0},grid:{top:80,left:10,right:20,bottom:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n.value.timestamps.map(a=>{const r=new Date(a);return`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`}),axisLabel:{fontSize:10}},yAxis:{type:"value",name:"\u54CD\u5E94\u65F6\u95F4(ms)",nameTextStyle:{fontSize:10},axisLabel:{fontSize:10,formatter:a=>a>=1e3?`${(a/1e3).toFixed(1)}s`:`${a}ms`}},series:[{name:"\u5E73\u5747",type:"line",data:n.value.avgValues,showSymbol:!1,lineStyle:{width:2,color:"#3370ff"},emphasis:{focus:"series"}},{name:"\u6700\u5927",type:"line",data:n.value.maxValues,showSymbol:!1,lineStyle:{width:1,type:"dashed",color:"#f53f3f"},emphasis:{focus:"series"}},{name:"\u6700\u5C0F",type:"line",data:n.value.minValues,showSymbol:!1,lineStyle:{width:1,type:"dashed",color:"#14c9c9"},emphasis:{focus:"series"}}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};t.setOption(e),t.hideLoading()};return R([()=>d.serviceName,()=>d.timeRange],()=>{_()}),R(()=>n.value,()=>{t&&(F.value?t.showLoading({text:"\u52A0\u8F7D\u4E2D...",color:"#3370ff",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)"}):f())},{deep:!0}),Z(()=>{p(),_()}),(e,a)=>(v(),S("div",{ref_key:"chartContainer",ref:E,style:{width:"100%",height:"100%"}},null,512))}}),rt={name:"ServiceErrorDistributionChart"},ct=P({...rt,props:{serviceName:{},timeRange:{}},setup(N){j([ut,X,Y,te,ae,se,J]);const d=N,E=x(null);let t=null;const F=x(!1),n=x({endpoints:[],values:[]}),_=async()=>{if(!!d.serviceName){F.value=!0;try{const f=await re(`-${d.timeRange}`,void 0,!0,d.serviceName);if(f.series){const e=f.series.filter(a=>a.name==="api.request.error");if(e&&e.length>0){const a=new Map;e.forEach(l=>{const w=l.labels.endpoint||"unknown",b=`${l.labels.method||"GET"} ${w}`,B=l.points.reduce((z,D)=>z+D.value,0);B>0&&(a.has(b)?a.set(b,a.get(b)+B):a.set(b,B))});const r=Array.from(a.entries()).sort((l,w)=>w[1]-l[1]).slice(0,10);r.length>0?n.value={endpoints:r.map(([l])=>l),values:r.map(([,l])=>l)}:n.value={endpoints:["\u65E0\u9519\u8BEF"],values:[1]}}else n.value={endpoints:["\u65E0\u9519\u8BEF"],values:[1]}}else n.value={endpoints:["\u65E0\u6570\u636E"],values:[1]}}catch(f){console.error("\u52A0\u8F7D\u670D\u52A1\u9519\u8BEF\u5206\u5E03\u6570\u636E\u5931\u8D25:",f),M.error("\u52A0\u8F7D\u670D\u52A1\u9519\u8BEF\u5206\u5E03\u6570\u636E\u5931\u8D25"),n.value={endpoints:["\u52A0\u8F7D\u5931\u8D25"],values:[1]}}finally{F.value=!1}}},$=()=>{if(!E.value)return;t=K(E.value),p();const f=()=>{t==null||t.resize()};window.addEventListener("resize",f),W(()=>{window.removeEventListener("resize",f),t==null||t.dispose(),t=null})},p=()=>{if(!t)return;const f=n.value.endpoints[0]!=="\u65E0\u9519\u8BEF"&&n.value.endpoints[0]!=="\u65E0\u6570\u636E"&&n.value.endpoints[0]!=="\u52A0\u8F7D\u5931\u8D25",e={title:{text:"\u9519\u8BEF\u5206\u5E03",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"item",formatter:a=>f?`${a.name}<br/>\u9519\u8BEF\u6570: ${a.value} (${a.percent}%)`:a.name},toolbox:{feature:{saveAsImage:{}}},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,textStyle:{fontSize:10}},series:[{name:"\u9519\u8BEF\u5206\u5E03",type:"pie",radius:["40%","70%"],center:["40%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:n.value.endpoints.map((a,r)=>({value:n.value.values[r],name:a,itemStyle:{color:f?void 0:a==="\u65E0\u9519\u8BEF"?"#14c9c9":a==="\u65E0\u6570\u636E"?"#86909c":"#f53f3f"}}))}],color:["#f53f3f","#f77234","#ff9a2e","#ffcf54","#3370ff","#165dff","#14c9c9","#00b42a","#722ed1","#9b55ff"]};t.setOption(e),t.hideLoading()};return R([()=>d.serviceName,()=>d.timeRange],()=>{_()}),R(()=>n.value,()=>{t&&(F.value?t.showLoading({text:"\u52A0\u8F7D\u4E2D...",color:"#3370ff",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)"}):p())},{deep:!0}),Z(()=>{$(),_()}),(f,e)=>(v(),S("div",{ref_key:"chartContainer",ref:E,style:{width:"100%",height:"100%"}},null,512))}}),dt={name:"ServiceResourcesChart"},mt=P({...dt,props:{serviceName:{},timeRange:{}},setup(N){j([ee,Fe,X,Y,te,ae,se,le,J]);const d=N,E=x(null);let t=null;const F=x(!1),n=x({timestamps:[],cpuValues:[],memoryValues:[],threadValues:[]}),_=async()=>{if(!!d.serviceName){F.value=!0;try{const e=await Ee("app.cpu.usage,app.memory.used,app.thread.total",`-${d.timeRange}`,void 0,d.serviceName);if(e.data.series){const a=e.data.series.find(D=>D.name==="app.cpu.usage"),r=e.data.series.find(D=>D.name==="app.memory.used"),l=e.data.series.find(D=>D.name==="app.thread.total"),w=new Set;[a,r,l].forEach(D=>{D!=null&&D.points&&D.points.forEach(k=>{const h=typeof k.timestamp=="string"?k.timestamp:new Date(k.timestamp).toISOString();w.add(h)})});const O=Array.from(w).sort(),b=[],B=[],z=[];O.forEach(D=>{const k=a==null?void 0:a.points.find(C=>(typeof C.timestamp=="string"?C.timestamp:new Date(C.timestamp).toISOString())===D);b.push((k==null?void 0:k.value)||0);const h=r==null?void 0:r.points.find(C=>(typeof C.timestamp=="string"?C.timestamp:new Date(C.timestamp).toISOString())===D);B.push((h==null?void 0:h.value)||0);const L=l==null?void 0:l.points.find(C=>(typeof C.timestamp=="string"?C.timestamp:new Date(C.timestamp).toISOString())===D);z.push((L==null?void 0:L.value)||0)}),n.value={timestamps:O,cpuValues:b,memoryValues:B,threadValues:z}}else n.value={timestamps:[],cpuValues:[],memoryValues:[],threadValues:[]}}catch(e){console.error("\u52A0\u8F7D\u670D\u52A1\u8D44\u6E90\u6570\u636E\u5931\u8D25:",e),M.error("\u52A0\u8F7D\u670D\u52A1\u8D44\u6E90\u6570\u636E\u5931\u8D25")}finally{F.value=!1}}},$=()=>{if(!E.value)return;t=K(E.value),f();const e=()=>{t==null||t.resize()};window.addEventListener("resize",e),W(()=>{window.removeEventListener("resize",e),t==null||t.dispose(),t=null})},p=e=>e<1024?`${e.toFixed(2)}MB`:`${(e/1024).toFixed(2)}GB`,f=()=>{if(!t)return;const e={title:{text:"\u670D\u52A1\u8D44\u6E90\u4F7F\u7528\u8D8B\u52BF",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:a=>{let r=`${a[0].name}<br/>`;return a.forEach(l=>{l.seriesName==="CPU\u4F7F\u7528\u7387"?r+=`${l.seriesName}: ${l.value.toFixed(2)}%<br/>`:l.seriesName==="\u5185\u5B58\u4F7F\u7528"?r+=`${l.seriesName}: ${p(l.value)}<br/>`:r+=`${l.seriesName}: ${l.value}<br/>`}),r}},legend:{data:["CPU\u4F7F\u7528\u7387","\u5185\u5B58\u4F7F\u7528","\u7EBF\u7A0B\u6570"],top:30},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{top:80,left:10,right:20,bottom:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n.value.timestamps.map(a=>{const r=new Date(a);return`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`}),axisLabel:{fontSize:10}},yAxis:[{type:"value",name:"CPU\u4F7F\u7528\u7387(%)",min:0,max:100,position:"left",axisLine:{show:!0,lineStyle:{color:"#3370ff"}},axisLabel:{formatter:"{value}%",fontSize:10}},{type:"value",name:"\u5185\u5B58\u4F7F\u7528(MB)",position:"right",axisLine:{show:!0,lineStyle:{color:"#14c9c9"}},axisLabel:{fontSize:10,formatter:a=>a>=1024?`${(a/1024).toFixed(1)}GB`:`${a}MB`}},{type:"value",name:"\u7EBF\u7A0B\u6570",position:"right",offset:80,axisLine:{show:!0,lineStyle:{color:"#ff7d00"}},axisLabel:{fontSize:10}}],series:[{name:"CPU\u4F7F\u7528\u7387",type:"line",yAxisIndex:0,data:n.value.cpuValues,showSymbol:!1,lineStyle:{color:"#3370ff"},emphasis:{focus:"series"}},{name:"\u5185\u5B58\u4F7F\u7528",type:"line",yAxisIndex:1,data:n.value.memoryValues,showSymbol:!1,lineStyle:{color:"#14c9c9"},emphasis:{focus:"series"}},{name:"\u7EBF\u7A0B\u6570",type:"line",yAxisIndex:2,data:n.value.threadValues,showSymbol:!1,lineStyle:{color:"#ff7d00"},emphasis:{focus:"series"}}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};t.setOption(e),t.hideLoading()};return R([()=>d.serviceName,()=>d.timeRange],()=>{_()}),R(()=>n.value,()=>{t&&(F.value?t.showLoading({text:"\u52A0\u8F7D\u4E2D...",color:"#3370ff",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)"}):f())},{deep:!0}),Z(()=>{$(),_()}),(e,a)=>(v(),S("div",{ref_key:"chartContainer",ref:E,style:{width:"100%",height:"100%"}},null,512))}}),ft={name:"EndpointResponseTrendChart"},pt=P({...ft,props:{data:{},isError:{type:Boolean}},setup(N){j([ee,X,Y,J]);const d=N,E=x(null);let t=null;const F=()=>{if(!E.value)return;t=K(E.value),n();const _=()=>{t==null||t.resize()};window.addEventListener("resize",_),W(()=>{window.removeEventListener("resize",_),t==null||t.dispose(),t=null})},n=()=>{if(!t)return;const _=d.data.map(p=>[typeof p.timestamp=="string"?new Date(p.timestamp).getTime():p.timestamp,p.value]),$={animation:!1,grid:{top:2,right:2,bottom:2,left:2,containLabel:!1},xAxis:{type:"time",show:!1},yAxis:{type:"value",show:!1},series:[{type:"line",data:_,symbol:"none",lineStyle:{width:2,color:d.isError?"#f53f3f":"#3370ff"},areaStyle:{opacity:.2,color:d.isError?"#f53f3f":"#3370ff"}}]};t.setOption($)};return R(()=>d.data,()=>{n()},{deep:!0}),R(()=>d.isError,()=>{n()}),Z(()=>{F()}),(_,$)=>(v(),S("div",{ref_key:"chartContainer",ref:E,style:{width:"100%",height:"100%"}},null,512))}}),vt={name:"InstanceResourcesChart"},ht=P({...vt,props:{serviceName:{},instanceId:{},timeRange:{}},setup(N){j([ee,X,Y,te,ae,se,le,J]);const d=N,E=x(null);let t=null;const F=x(!1),n=x({timestamps:[],cpuValues:[],memoryValues:[],threadValues:[],gcValues:[]}),_=async()=>{if(!(!d.serviceName||!d.instanceId)){F.value=!0;try{const e=await Ee("app.cpu.usage,app.memory.used,app.thread.total,app.gc.count",`-${d.timeRange}`,void 0,d.serviceName,d.instanceId);if(e.data.series){const a=e.data.series.find(h=>h.name==="app.cpu.usage"),r=e.data.series.find(h=>h.name==="app.memory.used"),l=e.data.series.find(h=>h.name==="app.thread.total"),w=e.data.series.find(h=>h.name==="app.gc.count"),O=new Set;[a,r,l,w].forEach(h=>{h!=null&&h.points&&h.points.forEach(L=>{const C=typeof L.timestamp=="string"?L.timestamp:new Date(L.timestamp).toISOString();O.add(C)})});const b=Array.from(O).sort(),B=[],z=[],D=[],k=[];b.forEach(h=>{const L=a==null?void 0:a.points.find(u=>(typeof u.timestamp=="string"?u.timestamp:new Date(u.timestamp).toISOString())===h);B.push((L==null?void 0:L.value)||0);const C=r==null?void 0:r.points.find(u=>(typeof u.timestamp=="string"?u.timestamp:new Date(u.timestamp).toISOString())===h);z.push((C==null?void 0:C.value)||0);const G=l==null?void 0:l.points.find(u=>(typeof u.timestamp=="string"?u.timestamp:new Date(u.timestamp).toISOString())===h);D.push((G==null?void 0:G.value)||0);const c=w==null?void 0:w.points.find(u=>(typeof u.timestamp=="string"?u.timestamp:new Date(u.timestamp).toISOString())===h);k.push((c==null?void 0:c.value)||0)}),n.value={timestamps:b,cpuValues:B,memoryValues:z,threadValues:D,gcValues:k}}}catch(e){console.error("\u52A0\u8F7D\u5B9E\u4F8B\u8D44\u6E90\u6570\u636E\u5931\u8D25:",e),M.error("\u52A0\u8F7D\u5B9E\u4F8B\u8D44\u6E90\u6570\u636E\u5931\u8D25")}finally{F.value=!1}}},$=e=>e<1024?`${e.toFixed(2)}MB`:`${(e/1024).toFixed(2)}GB`,p=()=>{if(!E.value)return;t=K(E.value),f();const e=()=>{t==null||t.resize()};window.addEventListener("resize",e),W(()=>{window.removeEventListener("resize",e),t==null||t.dispose(),t=null})},f=()=>{if(!t)return;const e={title:{text:"\u5B9E\u4F8B\u8D44\u6E90\u4F7F\u7528\u8D8B\u52BF",left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:a=>{let r=`${a[0].name}<br/>`;return a.forEach(l=>{l.seriesName==="CPU\u4F7F\u7528\u7387"?r+=`${l.seriesName}: ${l.value.toFixed(2)}%<br/>`:l.seriesName==="\u5185\u5B58\u4F7F\u7528"?r+=`${l.seriesName}: ${$(l.value)}<br/>`:r+=`${l.seriesName}: ${l.value}<br/>`}),r}},legend:{data:["CPU\u4F7F\u7528\u7387","\u5185\u5B58\u4F7F\u7528","\u7EBF\u7A0B\u6570","GC\u6B21\u6570"],top:30},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{top:80,left:10,right:20,bottom:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n.value.timestamps.map(a=>{const r=new Date(a);return`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`}),axisLabel:{fontSize:10}},yAxis:[{type:"value",name:"CPU\u4F7F\u7528\u7387(%)",min:0,max:100,position:"left",axisLine:{show:!0,lineStyle:{color:"#3370ff"}},axisLabel:{formatter:"{value}%",fontSize:10}},{type:"value",name:"\u5185\u5B58\u4F7F\u7528(MB)",position:"right",axisLine:{show:!0,lineStyle:{color:"#14c9c9"}},axisLabel:{fontSize:10,formatter:a=>a>=1024?`${(a/1024).toFixed(1)}GB`:`${a}MB`}}],series:[{name:"CPU\u4F7F\u7528\u7387",type:"line",yAxisIndex:0,data:n.value.cpuValues,showSymbol:!1,lineStyle:{color:"#3370ff"},emphasis:{focus:"series"}},{name:"\u5185\u5B58\u4F7F\u7528",type:"line",yAxisIndex:1,data:n.value.memoryValues,showSymbol:!1,lineStyle:{color:"#14c9c9"},emphasis:{focus:"series"}},{name:"\u7EBF\u7A0B\u6570",type:"line",yAxisIndex:1,data:n.value.threadValues,showSymbol:!1,lineStyle:{color:"#ff7d00"},emphasis:{focus:"series"}},{name:"GC\u6B21\u6570",type:"line",yAxisIndex:1,data:n.value.gcValues,showSymbol:!1,lineStyle:{color:"#722ed1"},emphasis:{focus:"series"}}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};t.setOption(e),t.hideLoading()};return R([()=>d.serviceName,()=>d.instanceId,()=>d.timeRange],()=>{_()}),R(()=>n.value,()=>{t&&(F.value?t.showLoading({text:"\u52A0\u8F7D\u4E2D...",color:"#3370ff",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)"}):f())},{deep:!0}),Z(()=>{p(),_()}),(e,a)=>(v(),S("div",{ref_key:"chartContainer",ref:E,style:{width:"100%",height:"100%"}},null,512))}}),_t={name:"EndpointDetailChart"},gt=P({..._t,props:{serviceName:{},endpoint:{},method:{},timeRange:{}},setup(N){j([ee,X,Y,te,ae,se,le,J]);const d=N,E=x(null);let t=null;const F=x(!1),n=x({timestamps:[],responseTime:[],callCount:[],errorRate:[]}),_=async()=>{if(!(!d.serviceName||!d.endpoint)){F.value=!0;try{const e=await re(`-${d.timeRange}`,void 0,!0,d.serviceName);if(e.series){const a=e.series.filter(r=>r.labels.endpoint===d.endpoint&&r.labels.method===d.method);if(a.length>0){const r=new Set;a.forEach(B=>{B!=null&&B.points&&B.points.forEach(z=>{const D=typeof z.timestamp=="string"?z.timestamp:new Date(z.timestamp).toISOString();r.add(D)})});const l=Array.from(r).sort(),w=[],O=[],b=[];l.forEach(B=>{const z=a.find(u=>u.name==="api.request.duration"),D=z==null?void 0:z.points.find(u=>(typeof u.timestamp=="string"?u.timestamp:new Date(u.timestamp).toISOString())===B);w.push((D==null?void 0:D.value)||0);const k=a.find(u=>u.name==="api.request.count"),h=k==null?void 0:k.points.find(u=>(typeof u.timestamp=="string"?u.timestamp:new Date(u.timestamp).toISOString())===B);O.push((h==null?void 0:h.value)||0);const L=a.find(u=>u.name==="api.request.error"),C=L==null?void 0:L.points.find(u=>(typeof u.timestamp=="string"?u.timestamp:new Date(u.timestamp).toISOString())===B),G=(C==null?void 0:C.value)||0,c=(h==null?void 0:h.value)||1;b.push(G/c)}),n.value={timestamps:l,responseTime:w,callCount:O,errorRate:b}}}}catch(e){console.error("\u52A0\u8F7D\u63A5\u53E3\u8BE6\u60C5\u6570\u636E\u5931\u8D25:",e),M.error("\u52A0\u8F7D\u63A5\u53E3\u8BE6\u60C5\u6570\u636E\u5931\u8D25")}finally{F.value=!1}}},$=e=>e<1?"< 1ms":e<1e3?`${e.toFixed(0)}ms`:`${(e/1e3).toFixed(2)}s`,p=()=>{if(!E.value)return;t=K(E.value),f();const e=()=>{t==null||t.resize()};window.addEventListener("resize",e),W(()=>{window.removeEventListener("resize",e),t==null||t.dispose(),t=null})},f=()=>{if(!t)return;const e={title:{text:`\u63A5\u53E3\u54CD\u5E94\u65F6\u95F4\u8D8B\u52BF: ${d.method} ${d.endpoint}`,left:"center",textStyle:{fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:a=>{let r=`${a[0].name}<br/>`;return a.forEach(l=>{l.seriesName==="\u54CD\u5E94\u65F6\u95F4"?r+=`${l.seriesName}: ${$(l.value)}<br/>`:l.seriesName==="\u9519\u8BEF\u7387"?r+=`${l.seriesName}: ${(l.value*100).toFixed(2)}%<br/>`:r+=`${l.seriesName}: ${l.value}<br/>`}),r}},legend:{data:["\u54CD\u5E94\u65F6\u95F4","\u8C03\u7528\u6B21\u6570","\u9519\u8BEF\u7387"],top:35},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{top:80,left:10,right:20,bottom:30,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n.value.timestamps.map(a=>{const r=new Date(a);return`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`}),axisLabel:{fontSize:10}},yAxis:[{type:"value",name:"\u54CD\u5E94\u65F6\u95F4(ms)",position:"left",axisLine:{show:!0,lineStyle:{color:"#3370ff"}},axisLabel:{fontSize:10,formatter:a=>a>=1e3?`${(a/1e3).toFixed(1)}s`:`${a}ms`}},{type:"value",name:"\u8C03\u7528\u6B21\u6570",position:"right",axisLine:{show:!0,lineStyle:{color:"#14c9c9"}},axisLabel:{fontSize:10}},{type:"value",name:"\u9519\u8BEF\u7387",min:0,max:1,position:"right",offset:80,axisLine:{show:!0,lineStyle:{color:"#f53f3f"}},axisLabel:{fontSize:10,formatter:"{value}%"}}],series:[{name:"\u54CD\u5E94\u65F6\u95F4",type:"line",yAxisIndex:0,data:n.value.responseTime,showSymbol:!1,lineStyle:{color:"#3370ff"},emphasis:{focus:"series"}},{name:"\u8C03\u7528\u6B21\u6570",type:"bar",yAxisIndex:1,data:n.value.callCount,barWidth:"40%",itemStyle:{color:"#14c9c9"},emphasis:{focus:"series"}},{name:"\u9519\u8BEF\u7387",type:"line",yAxisIndex:2,data:n.value.errorRate,showSymbol:!1,lineStyle:{width:2,color:"#f53f3f"},emphasis:{focus:"series"}}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};t.setOption(e),t.hideLoading()};return R([()=>d.serviceName,()=>d.endpoint,()=>d.method,()=>d.timeRange],()=>{_()}),R(()=>n.value,()=>{t&&(F.value?t.showLoading({text:"\u52A0\u8F7D\u4E2D...",color:"#3370ff",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)"}):f())},{deep:!0}),Z(()=>{p(),_()}),(e,a)=>(v(),S("div",{ref_key:"chartContainer",ref:E,style:{width:"100%",height:"100%"}},null,512))}}),yt={class:"container"},Et={class:"header-actions"},Ft={key:0,class:"loading-container"},Dt={class:"service-detail-header"},xt={class:"service-header"},bt={class:"service-info"},Ct={class:"service-title"},Bt={key:0,class:"service-description"},St={key:0,class:"service-tags"},wt={class:"metric-card"},At={class:"metric-icon"},$t={class:"metric-content"},kt={class:"metric-value"},Lt={class:"metric-card"},zt={class:"metric-icon"},Tt={class:"metric-content"},It={class:"metric-value"},Nt={class:"metric-card"},Vt={class:"metric-icon"},Rt={class:"metric-content"},Ot={class:"metric-value"},Mt={class:"metric-card"},Gt={class:"metric-icon"},Ht={class:"metric-content"},Ut={class:"chart-container"},Pt={class:"chart-container"},Zt={class:"chart-container"},qt={class:"chart-container"},Wt={class:"instance-id"},jt={key:0},Xt={key:1},Yt={key:0},Jt={key:1},Kt={key:0,class:"mini-chart"},Qt={key:1},ea={key:0,class:"instance-detail"},ta={class:"instance-charts",style:{"margin-top":"16px"}},aa={style:{height:"300px"}},sa={key:0,class:"endpoint-detail"},ua={class:"endpoint-charts",style:{"margin-top":"16px"}},na={style:{height:"300px"}},ia={name:"ServiceDetail"},oa=P({...ia,setup(N){const d=et(),E=tt(),t=x(d.params.serviceName),F=x(!0),n=x(null),_=x("1h"),$=x(!1),p=x(null),f=x(!1),e=x(null),a=async()=>{if(!t.value){M.error("\u670D\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}F.value=!0;try{const c=await at(t.value,_.value);n.value=c,c||M.warning("\u672A\u627E\u5230\u670D\u52A1\u8BE6\u60C5")}catch(c){console.error("\u52A0\u8F7D\u670D\u52A1\u8BE6\u60C5\u5931\u8D25:",c),M.error("\u52A0\u8F7D\u670D\u52A1\u8BE6\u60C5\u5931\u8D25")}finally{F.value=!1}},r=()=>{a()},l=()=>{E.back()},w=c=>{p.value=c,$.value=!0},O=c=>{e.value=c,f.value=!0},b=async c=>{try{const u=await st(c.id);if(u.data){const A=u.data;M.success({content:`\u5065\u5EB7\u68C0\u67E5\u7ED3\u679C: ${A.status}`,duration:3e3}),c.healthStatus=A.status==="healthy"?"healthy":"unhealthy"}else M.warning("\u672A\u8FD4\u56DE\u5065\u5EB7\u68C0\u67E5\u7ED3\u679C")}catch(u){console.error("\u5065\u5EB7\u68C0\u67E5\u5931\u8D25:",u),M.error("\u5065\u5EB7\u68C0\u67E5\u5931\u8D25")}},B=c=>{if(!c.instances||c.instances.length===0)return"\u65E0\u8282\u70B9";const u=c.instances.filter(A=>A.healthStatus==="healthy").length;return u===c.instances.length?"\u5065\u5EB7":u>0?`\u90E8\u5206\u5065\u5EB7 (${u}/${c.instances.length})`:"\u4E0D\u5065\u5EB7"},z=c=>{if(!c.instances||c.instances.length===0)return"gray";const u=c.instances.filter(A=>A.healthStatus==="healthy").length;return u===c.instances.length?"green":u>0?"orange":"red"},D=(c,u=0)=>c==null?"-":c.toLocaleString("zh-CN",{maximumFractionDigits:u}),k=c=>c==null?"-":c<1?"< 1ms":c<1e3?`${c.toFixed(0)}ms`:`${(c/1e3).toFixed(2)}s`,h=c=>c==null?"-":`${(c*100).toFixed(2)}%`,L=c=>c<1024?`${c.toFixed(2)}MB`:`${(c/1024).toFixed(2)}GB`,C=c=>{try{return new Date(c).toLocaleString("zh-CN")}catch{return c}},G=c=>c?c.length<=12?c:`${c.substring(0,6)}...${c.substring(c.length-6)}`:"";return Z(()=>{a()}),(c,u)=>{const A=Te,ue=Ie,De=Ne,pe=Ve,xe=Re,q=Oe,ne=Me,ve=Ge,U=He,ce=Ue,H=Pe,de=Ze,be=qe,T=We,he=je,_e=Xe,Ce=Ye,V=Je,me=Ke,ge=Qe;return v(),S("div",yt,[m("div",Et,[s(pe,null,{default:i(()=>[s(A,{onClick:l},{icon:i(()=>[s(Q(Be))]),default:i(()=>[u[3]||(u[3]=y(" \u8FD4\u56DE "))]),_:1}),s(A,{type:"primary",onClick:r},{icon:i(()=>[s(Q(Se))]),default:i(()=>[u[4]||(u[4]=y(" \u5237\u65B0 "))]),_:1}),s(De,{modelValue:_.value,"onUpdate:modelValue":u[0]||(u[0]=o=>_.value=o),placeholder:"\u65F6\u95F4\u8303\u56F4",style:{width:"120px"},onChange:r},{default:i(()=>[s(ue,{value:"1h"},{default:i(()=>u[5]||(u[5]=[y("\u6700\u8FD11\u5C0F\u65F6")])),_:1}),s(ue,{value:"6h"},{default:i(()=>u[6]||(u[6]=[y("\u6700\u8FD16\u5C0F\u65F6")])),_:1}),s(ue,{value:"12h"},{default:i(()=>u[7]||(u[7]=[y("\u6700\u8FD112\u5C0F\u65F6")])),_:1}),s(ue,{value:"24h"},{default:i(()=>u[8]||(u[8]=[y("\u6700\u8FD11\u5929")])),_:1}),s(ue,{value:"7d"},{default:i(()=>u[9]||(u[9]=[y("\u6700\u8FD17\u5929")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),F.value?(v(),S("div",Ft,[s(xe,{tip:"\u52A0\u8F7D\u670D\u52A1\u8BE6\u60C5..."})])):n.value?(v(),S(ye,{key:2},[m("div",Dt,[s(H,{class:"feature-card"},{default:i(()=>[m("div",xt,[m("div",bt,[m("h2",Ct,[y(g(n.value.name)+" ",1),s(ne,{color:z(n.value),style:{"margin-left":"8px"}},{default:i(()=>[y(g(B(n.value)),1)]),_:1},8,["color"]),n.value.version?(v(),I(ne,{key:0,color:"arcoblue"},{default:i(()=>[y("v"+g(n.value.version),1)]),_:1})):oe("",!0)]),n.value.description?(v(),S("p",Bt,g(n.value.description),1)):oe("",!0)]),n.value.tags&&Object.keys(n.value.tags).length>0?(v(),S("div",St,[(v(!0),S(ye,null,Le(n.value.tags,(o,ie)=>(v(),I(ne,{key:ie,color:"gray"},{default:i(()=>[y(g(ie)+": "+g(o),1)]),_:2},1024))),128))])):oe("",!0)]),s(ve,{style:{margin:"16px 0"}}),s(ce,{gutter:16},{default:i(()=>[s(U,{span:6,xs:12,sm:12,md:6,lg:6},{default:i(()=>[m("div",wt,[m("div",At,[s(Q(we),{style:{color:"#3370ff"}})]),m("div",$t,[m("div",kt,g(n.value.instances.length),1),u[10]||(u[10]=m("div",{class:"metric-label"},"\u670D\u52A1\u8282\u70B9\u6570",-1))])])]),_:1}),s(U,{span:6,xs:12,sm:12,md:6,lg:6},{default:i(()=>[m("div",Lt,[m("div",zt,[s(Q(Ae),{style:{color:"#14c9c9"}})]),m("div",Tt,[m("div",It,g(n.value.endpoints.length),1),u[11]||(u[11]=m("div",{class:"metric-label"},"\u63A5\u53E3\u6570\u91CF",-1))])])]),_:1}),s(U,{span:6,xs:12,sm:12,md:6,lg:6},{default:i(()=>[m("div",Nt,[m("div",Vt,[s(Q(ze),{style:{color:"#ff7d00"}})]),m("div",Rt,[m("div",Ot,g(n.value.metrics?k(n.value.metrics.avgResponseTime):"-"),1),u[12]||(u[12]=m("div",{class:"metric-label"},"\u5E73\u5747\u54CD\u5E94\u65F6\u95F4",-1))])])]),_:1}),s(U,{span:6,xs:12,sm:12,md:6,lg:6},{default:i(()=>[m("div",Mt,[m("div",Gt,[s(Q($e),{style:{color:"#f53f3f"}})]),m("div",Ht,[m("div",{class:fe(["metric-value",{"error-rate-high":n.value.metrics&&n.value.metrics.errorRate>.1}])},g(n.value.metrics?h(n.value.metrics.errorRate):"-"),3),u[13]||(u[13]=m("div",{class:"metric-label"},"\u603B\u4F53\u9519\u8BEF\u7387",-1))])])]),_:1})]),_:1})]),_:1})]),s(Ce,{"default-active-key":"overview"},{default:i(()=>[s(de,{key:"overview",title:"\u670D\u52A1\u6982\u89C8"},{default:i(()=>[s(ce,{gutter:[16,16]},{default:i(()=>[s(U,{span:12,xs:24,sm:24,md:12,lg:12},{default:i(()=>[s(H,{class:"feature-card",title:"\u603B\u8C03\u7528\u91CF\u8D8B\u52BF"},{default:i(()=>[m("div",Ut,[n.value.endpoints.length>0?(v(),I(it,{key:0,"service-name":t.value,"time-range":_.value},null,8,["service-name","time-range"])):(v(),I(q,{key:1,description:"\u6682\u65E0\u6570\u636E"}))])]),_:1})]),_:1}),s(U,{span:12,xs:24,sm:24,md:12,lg:12},{default:i(()=>[s(H,{class:"feature-card",title:"\u54CD\u5E94\u65F6\u95F4\u8D8B\u52BF"},{default:i(()=>[m("div",Pt,[n.value.endpoints.length>0?(v(),I(lt,{key:0,"service-name":t.value,"time-range":_.value},null,8,["service-name","time-range"])):(v(),I(q,{key:1,description:"\u6682\u65E0\u6570\u636E"}))])]),_:1})]),_:1})]),_:1}),s(ce,{gutter:[16,16],style:{"margin-top":"16px"}},{default:i(()=>[s(U,{span:12,xs:24,sm:24,md:12,lg:12},{default:i(()=>[s(H,{class:"feature-card",title:"\u9519\u8BEF\u5206\u5E03"},{default:i(()=>[m("div",Zt,[n.value.endpoints.length>0?(v(),I(ct,{key:0,"service-name":t.value,"time-range":_.value},null,8,["service-name","time-range"])):(v(),I(q,{key:1,description:"\u6682\u65E0\u6570\u636E"}))])]),_:1})]),_:1}),s(U,{span:12,xs:24,sm:24,md:12,lg:12},{default:i(()=>[s(H,{class:"feature-card",title:"\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5"},{default:i(()=>[m("div",qt,[n.value.instances.length>0?(v(),I(mt,{key:0,"service-name":t.value,"time-range":_.value},null,8,["service-name","time-range"])):(v(),I(q,{key:1,description:"\u6682\u65E0\u6570\u636E"}))])]),_:1})]),_:1})]),_:1})]),_:1}),s(de,{key:"instances",title:"\u670D\u52A1\u5B9E\u4F8B"},{default:i(()=>[s(H,{class:"feature-card"},{default:i(()=>[s(_e,{data:n.value.instances,pagination:!1,bordered:!1},{columns:i(()=>[s(T,{title:"\u5B9E\u4F8BID","data-index":"id"},{cell:i(({record:o})=>[s(be,{content:o.id},{default:i(()=>[m("span",Wt,g(G(o.id)),1)]),_:2},1032,["content"])]),_:1}),s(T,{title:"\u5730\u5740","data-index":"address"}),s(T,{title:"\u7AEF\u53E3","data-index":"port"}),s(T,{title:"\u5065\u5EB7\u72B6\u6001","data-index":"healthStatus"},{cell:i(({record:o})=>[s(he,{status:o.healthStatus==="healthy"?"success":o.healthStatus==="unhealthy"?"danger":"normal",text:o.healthStatus==="healthy"?"\u5065\u5EB7":o.healthStatus==="unhealthy"?"\u4E0D\u5065\u5EB7":"\u672A\u77E5"},null,8,["status","text"])]),_:1}),s(T,{title:"\u6700\u540E\u6D3B\u8DC3\u65F6\u95F4","data-index":"lastActive"},{cell:i(({record:o})=>[y(g(o.lastActive?C(o.lastActive):"-"),1)]),_:1}),s(T,{title:"\u8D44\u6E90\u4F7F\u7528"},{cell:i(({record:o})=>[o.resources?(v(),S("div",jt,[m("div",null,"CPU: "+g(o.resources.cpu?`${o.resources.cpu.toFixed(2)}%`:"-"),1),m("div",null,"\u5185\u5B58: "+g(o.resources.memory?L(o.resources.memory):"-"),1)])):(v(),S("span",Xt,"-"))]),_:1}),s(T,{title:"\u8FD0\u884C\u65F6\u6570\u636E"},{cell:i(({record:o})=>[o.runtime?(v(),S("div",Yt,[m("div",null,"\u7EBF\u7A0B\u6570: "+g(o.runtime.threads||"-"),1),m("div",null,"GC\u6B21\u6570: "+g(o.runtime.gc||"-"),1)])):(v(),S("span",Jt,"-"))]),_:1}),s(T,{title:"\u64CD\u4F5C",width:150},{cell:i(({record:o})=>[s(pe,null,{default:i(()=>[s(A,{type:"text",size:"small",onClick:ie=>w(o)},{default:i(()=>u[14]||(u[14]=[y(" \u8BE6\u60C5 ")])),_:2},1032,["onClick"]),s(A,{type:"text",status:"warning",size:"small",onClick:ie=>b(o)},{default:i(()=>u[15]||(u[15]=[y(" \u5065\u5EB7\u68C0\u67E5 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),s(de,{key:"endpoints",title:"\u63A5\u53E3\u76D1\u63A7"},{default:i(()=>[s(H,{class:"feature-card"},{default:i(()=>[s(_e,{data:n.value.endpoints,pagination:!1,bordered:!1},{columns:i(()=>[s(T,{title:"\u8BF7\u6C42\u65B9\u6CD5","data-index":"method"},{cell:i(({record:o})=>[s(ne,{color:o.method==="GET"?"green":o.method==="POST"?"blue":o.method==="PUT"?"orange":o.method==="DELETE"?"red":"gray"},{default:i(()=>[y(g(o.method),1)]),_:2},1032,["color"])]),_:1}),s(T,{title:"\u63A5\u53E3\u8DEF\u5F84","data-index":"path"}),s(T,{title:"\u8C03\u7528\u6B21\u6570"},{cell:i(({record:o})=>[y(g(o.metrics?D(o.metrics.callCount):"-"),1)]),_:1}),s(T,{title:"\u5E73\u5747\u54CD\u5E94\u65F6\u95F4"},{cell:i(({record:o})=>[y(g(o.metrics?k(o.metrics.responseTime):"-"),1)]),_:1}),s(T,{title:"\u9519\u8BEF\u7387"},{cell:i(({record:o})=>[m("span",{class:fe({"error-rate-high":o.metrics&&o.metrics.errorRate!==void 0&&o.metrics.errorRate>.1})},g(o.metrics?h(o.metrics.errorRate):"-"),3)]),_:1}),s(T,{title:"\u54CD\u5E94\u65F6\u95F4\u8D8B\u52BF"},{cell:i(({record:o})=>[o.trend&&o.trend.length>0?(v(),S("div",Kt,[s(pt,{data:o.trend,"is-error":o.metrics&&o.metrics.errorRate!==void 0&&o.metrics.errorRate>.1},null,8,["data","is-error"])])):(v(),S("span",Qt,"-"))]),_:1}),s(T,{title:"\u64CD\u4F5C",width:100},{cell:i(({record:o})=>[s(A,{type:"text",size:"small",onClick:ie=>O(o)},{default:i(()=>u[16]||(u[16]=[y(" \u8BE6\u60C5 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),s(ge,{visible:$.value,"onUpdate:visible":u[1]||(u[1]=o=>$.value=o),title:"\u5B9E\u4F8B\u8BE6\u7EC6\u4FE1\u606F",footer:!1,width:700},{default:i(()=>[p.value?(v(),S("div",ea,[s(me,{column:2,title:"\u57FA\u672C\u4FE1\u606F",bordered:""},{default:i(()=>[s(V,{label:"\u5B9E\u4F8BID"},{default:i(()=>[y(g(p.value.id),1)]),_:1}),s(V,{label:"\u5065\u5EB7\u72B6\u6001"},{default:i(()=>[s(he,{status:p.value.healthStatus==="healthy"?"success":p.value.healthStatus==="unhealthy"?"danger":"normal",text:p.value.healthStatus==="healthy"?"\u5065\u5EB7":p.value.healthStatus==="unhealthy"?"\u4E0D\u5065\u5EB7":"\u672A\u77E5"},null,8,["status","text"])]),_:1}),s(V,{label:"\u5730\u5740"},{default:i(()=>[y(g(p.value.address),1)]),_:1}),s(V,{label:"\u7AEF\u53E3"},{default:i(()=>[y(g(p.value.port),1)]),_:1}),s(V,{label:"\u6700\u540E\u6D3B\u8DC3\u65F6\u95F4"},{default:i(()=>[y(g(p.value.lastActive?C(p.value.lastActive):"-"),1)]),_:1})]),_:1}),s(ve,{style:{margin:"16px 0"}}),s(me,{title:"\u8D44\u6E90\u4F7F\u7528\u60C5\u51B5",column:2,bordered:""},{default:i(()=>[s(V,{label:"CPU\u4F7F\u7528\u7387"},{default:i(()=>{var o;return[y(g((o=p.value.resources)!=null&&o.cpu?`${p.value.resources.cpu.toFixed(2)}%`:"-"),1)]}),_:1}),s(V,{label:"\u5185\u5B58\u4F7F\u7528"},{default:i(()=>{var o;return[y(g((o=p.value.resources)!=null&&o.memory?L(p.value.resources.memory):"-"),1)]}),_:1}),s(V,{label:"\u7EBF\u7A0B\u6570"},{default:i(()=>{var o;return[y(g(((o=p.value.runtime)==null?void 0:o.threads)||"-"),1)]}),_:1}),s(V,{label:"GC\u6B21\u6570"},{default:i(()=>{var o;return[y(g(((o=p.value.runtime)==null?void 0:o.gc)||"-"),1)]}),_:1})]),_:1}),m("div",ta,[s(H,{title:"\u5B9E\u4F8B\u8D44\u6E90\u4F7F\u7528\u8D8B\u52BF"},{default:i(()=>[m("div",aa,[p.value?(v(),I(ht,{key:0,"service-name":t.value,"instance-id":p.value.id,"time-range":_.value},null,8,["service-name","instance-id","time-range"])):(v(),I(q,{key:1,description:"\u6682\u65E0\u6570\u636E"}))])]),_:1})])])):oe("",!0)]),_:1},8,["visible"]),s(ge,{visible:f.value,"onUpdate:visible":u[2]||(u[2]=o=>f.value=o),title:"\u63A5\u53E3\u8BE6\u7EC6\u4FE1\u606F",footer:!1,width:700},{default:i(()=>[e.value?(v(),S("div",sa,[s(me,{column:2,title:"\u57FA\u672C\u4FE1\u606F",bordered:""},{default:i(()=>[s(V,{label:"\u8BF7\u6C42\u65B9\u6CD5"},{default:i(()=>[s(ne,{color:e.value.method==="GET"?"green":e.value.method==="POST"?"blue":e.value.method==="PUT"?"orange":e.value.method==="DELETE"?"red":"gray"},{default:i(()=>[y(g(e.value.method),1)]),_:1},8,["color"])]),_:1}),s(V,{label:"\u8DEF\u5F84"},{default:i(()=>[y(g(e.value.path),1)]),_:1}),s(V,{label:"\u8C03\u7528\u6B21\u6570"},{default:i(()=>[y(g(e.value.metrics?D(e.value.metrics.callCount):"-"),1)]),_:1}),s(V,{label:"\u5E73\u5747\u54CD\u5E94\u65F6\u95F4"},{default:i(()=>[y(g(e.value.metrics?k(e.value.metrics.responseTime):"-"),1)]),_:1}),s(V,{label:"\u9519\u8BEF\u7387"},{default:i(()=>[m("span",{class:fe({"error-rate-high":e.value.metrics&&e.value.metrics.errorRate!==void 0&&e.value.metrics.errorRate>.1})},g(e.value.metrics?h(e.value.metrics.errorRate):"-"),3)]),_:1})]),_:1}),m("div",ua,[s(H,{title:"\u54CD\u5E94\u65F6\u95F4\u8D8B\u52BF"},{default:i(()=>[m("div",na,[e.value?(v(),I(gt,{key:0,"service-name":t.value,endpoint:e.value.path,method:e.value.method,"time-range":_.value},null,8,["service-name","endpoint","method","time-range"])):(v(),I(q,{key:1,description:"\u6682\u65E0\u6570\u636E"}))])]),_:1})])])):oe("",!0)]),_:1},8,["visible"])],64)):(v(),I(q,{key:1,description:"\u672A\u627E\u5230\u670D\u52A1\u8BE6\u60C5"}))])}}});const ba=ke(oa,[["__scopeId","data-v-62351a11"]]);export{ba as default};
