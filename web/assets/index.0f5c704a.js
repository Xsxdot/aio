import{v as eu,E as rl,o as Tl,_ as Ie,F as Jl,G as Kl,H as Rl,J as Pl,t as Nu,K as zl,y as Ll,C as Ml,M as xl}from"./index.15381f0b.js";/* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as Ne,j as F,w as he,c as ae,o as ou,C as n,D as y,E as f,aI as e,aH as u,u as b,aM as i,aN as t,a5 as ql,ae as Iu,aE as R,ao as Hl,Z as ol,aF as ie,bC as Wl,c2 as Gl,G as dl,c3 as We,bE as Zl,F as Oe,X as Xl,aX as A,n as Fu,aY as Te,bx as Eu,ba as ze,b2 as Pe,b1 as cl,K as Yl,I as Ql,aK as ne,a6 as Re,af as Tu,aJ as ye,b7 as Ju,bT as _u,bU as gu,aV as vl,a0 as et,b$ as Ku,c0 as Ru,r as Qe,bF as ut,ac as nl,aZ as Pu,bO as zu,c4 as fl,bP as Lu,bX as hu,bY as Cu,bQ as pl,bd as ml,aW as lt,b_ as tt,bR as Mu,bc as yl,bb as Fl,c5 as El,b8 as at,c6 as ot,bl as xu,bt as qu,bW as _l,bS as gl,ad as nt,aB as au,bv as st,bs as it,c7 as rt,bq as dt,br as ct,c8 as vt,bu as ft}from"./arco.2804d378.js";import{f as hl,u as Cl,e as pt,a as mt,b as yt,s as Ye,c as Ft,d as sl,g as Et,h as _t,i as gt}from"./config.8a26327d.js";/* empty css                */import"./chart.100020e2.js";import"./vue.bbad6851.js";const ht={class:"json-editor-wrapper"},Ct={class:"json-editor-toolbar"},Dt={key:0,class:"json-validation-error"},bt=["placeholder","onKeydown"],Bt={class:"json-editor-footer"},$t={class:"json-editor-status"},kt={key:0,class:"status-valid"},At={key:1,class:"status-invalid"},wt={name:"JsonEditor"},Vt=Ne({...wt,props:{modelValue:{type:String,required:!0},height:{type:[String,Number],default:"300px"},placeholder:{type:String,default:"\u8BF7\u8F93\u5165JSON\u5185\u5BB9"},mode:{type:String,default:"object"}},emits:["update:modelValue","apply","close"],setup(ee,{expose:de,emit:c}){const S=ee,w=c,{t:d}=eu.exports.useI18n(),E=F(S.modelValue),k=F(!0),V=F(""),P=F(!1),r=F(null);he(()=>S.modelValue,p=>{p!==E.value&&(E.value=p,m())});const T=ae(()=>({height:P.value?"100%":typeof S.height=="number"?`${S.height}px`:S.height})),W=()=>{m(),w("update:modelValue",E.value)},ue=()=>{try{const p=JSON.parse(E.value);E.value=JSON.stringify(p,null,2),m(),w("update:modelValue",E.value)}catch{}},x=()=>{try{const p=JSON.parse(E.value);E.value=JSON.stringify(p),m(),w("update:modelValue",E.value)}catch{}},N=()=>{if(r.value)try{navigator.clipboard.writeText(E.value).then(()=>{A.success(d("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"))}).catch(()=>{A.error(d("\u590D\u5236\u5931\u8D25"))})}catch{r.value.select(),document.execCommand("copy"),A.success(d("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"))}},X=()=>{P.value=!P.value,P.value&&Fu(()=>{var p;(p=r.value)==null||p.focus()})},M=()=>{k.value&&(w("apply",E.value),P.value&&(P.value=!1))},re=()=>{P.value&&(P.value=!1),w("close")},m=()=>{try{if(!E.value.trim()){k.value=!0,V.value="";return}const p=JSON.parse(E.value);if(S.mode==="object"&&!C(p)){k.value=!1,V.value=d("\u5E94\u8BE5\u662F\u4E00\u4E2A\u5BF9\u8C61");return}if(S.mode==="array"&&!Array.isArray(p)){k.value=!1,V.value=d("\u5E94\u8BE5\u662F\u4E00\u4E2A\u6570\u7EC4");return}k.value=!0,V.value=""}catch(p){k.value=!1,V.value=p instanceof Error?p.message:d("JSON\u683C\u5F0F\u4E0D\u6B63\u786E")}},G=p=>{if(r.value){const v=r.value.selectionStart,$=r.value.selectionEnd,L=E.value.substring(0,v)+"  "+E.value.substring($);E.value=L,Fu(()=>{r.value.selectionStart=r.value.selectionEnd=v+2}),w("update:modelValue",E.value)}},z=p=>{p.key==="Escape"&&P.value&&(P.value=!1),p.key==="s"&&(p.ctrlKey||p.metaKey)&&(p.preventDefault(),k.value&&M())};function C(p){return p!==null&&typeof p=="object"&&!Array.isArray(p)}return ou(()=>{m()}),de({close:re}),(p,v)=>{const $=Te,L=Eu,I=ze;return n(),y("div",ht,[f("div",Ct,[e(I,null,{default:u(()=>[e($,{type:"text",size:"small",disabled:!k.value,onClick:ue},{icon:u(()=>[e(b(rl))]),default:u(()=>[i(" "+t(p.$t("\u683C\u5F0F\u5316")),1)]),_:1},8,["disabled"]),e($,{type:"text",size:"small",disabled:!k.value,onClick:x},{icon:u(()=>[e(b(ql))]),default:u(()=>[i(" "+t(p.$t("\u538B\u7F29")),1)]),_:1},8,["disabled"]),e($,{type:"text",size:"small",onClick:N},{icon:u(()=>[e(b(Iu))]),default:u(()=>[i(" "+t(p.$t("\u590D\u5236")),1)]),_:1}),e(L,{content:p.$t("\u5168\u5C4F\u7F16\u8F91")},{default:u(()=>[e($,{type:"text",size:"small",onClick:X},{icon:u(()=>[P.value?(n(),R(b(Tl),{key:0})):(n(),R(b(Hl),{key:1}))]),_:1})]),_:1},8,["content"])]),_:1}),k.value?ie("",!0):(n(),y("div",Dt,[e(b(ol),{style:{color:"#f53f3f"}}),i(" "+t(p.$t("JSON\u683C\u5F0F\u4E0D\u6B63\u786E")),1)]))]),f("div",{class:Oe(["json-editor-container",{fullscreen:P.value}])},[Wl(f("textarea",{ref_key:"editorRef",ref:r,"onUpdate:modelValue":v[0]||(v[0]=Q=>E.value=Q),class:"json-editor-textarea",placeholder:ee.placeholder,style:dl(T.value),onInput:W,onKeydown:[We(Zl(G,["prevent"]),["tab"]),z]},null,44,bt),[[Gl,E.value]])],2),f("div",Bt,[f("div",$t,[k.value?(n(),y("span",kt,[e(b(Xl),{style:{color:"#00b42a"}}),i(" "+t(p.$t("JSON\u683C\u5F0F\u6B63\u786E")),1)])):(n(),y("span",At,[e(b(ol),{style:{color:"#f53f3f"}}),i(" "+t(V.value),1)]))]),e($,{size:"mini",type:"primary",status:"success",disabled:!k.value,onClick:M},{default:u(()=>[i(t(p.$t("\u5E94\u7528")),1)]),_:1},8,["disabled"])])])}}});const Dl=Ie(Vt,[["__scopeId","data-v-e1a91f67"]]),St={class:"json-editor-modal-footer"},jt={name:"JsonEditorModal"},Ot=Ne({...jt,props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},value:{type:String,default:""},width:{type:[String,Number],default:700},placeholder:{type:String,default:""},fieldKey:{type:String,default:""},mode:{type:String,default:"object"}},emits:["update:visible","update:value","apply","close"],setup(ee,{emit:de}){const c=ee,S=de,{t:w}=eu.exports.useI18n(),d=F(c.value),E=F(),k=F(450),V=ae(()=>{if(!d.value.trim())return!0;try{const W=JSON.parse(d.value);return!(c.mode==="object"&&!P(W)||c.mode==="array"&&!Array.isArray(W))}catch{return!1}});function P(W){return W!==null&&typeof W=="object"&&!Array.isArray(W)}he(()=>c.value,W=>{W!==d.value&&(d.value=W)}),he(()=>c.visible,W=>{W&&(d.value=c.value)}),he(d,W=>{S("update:value",W)});const r=()=>{V.value&&(S("apply",{key:c.fieldKey,value:d.value}),S("update:value",d.value),S("update:visible",!1))},T=()=>{S("update:visible",!1),S("close")};return(W,ue)=>{const x=Te,N=ze,X=Pe;return n(),R(X,{visible:ee.visible,title:ee.title||b(w)("JSON\u7F16\u8F91\u5668"),width:ee.width,"mask-closable":!1,"esc-to-close":!1,footer:!1,"unmount-on-close":!1,onClose:T},{default:u(()=>[e(Dl,{ref_key:"editorRef",ref:E,modelValue:d.value,"onUpdate:modelValue":ue[0]||(ue[0]=M=>d.value=M),height:k.value,placeholder:ee.placeholder,mode:ee.mode,onApply:r,onClose:T},null,8,["modelValue","height","placeholder","mode"]),f("div",St,[e(N,null,{default:u(()=>[e(x,{onClick:T},{default:u(()=>[i(t(b(w)("\u53D6\u6D88")),1)]),_:1}),e(x,{type:"primary",disabled:!V.value,onClick:r},{default:u(()=>[i(t(b(w)("\u786E\u5B9A")),1)]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["visible","title","width"])}}});const Ut=Ie(Ot,[["__scopeId","data-v-89215554"]]),It={class:"node-header"},Nt={key:1,class:"expand-placeholder"},Tt={key:2,class:"node-name"},Jt={class:"node-value"},Kt={class:"item-count"},Rt={key:1,class:"value-editor"},Pt={class:"placeholder-value"},zt={class:"node-actions"},Lt={key:0,class:"node-children"},Mt={key:0},xt={class:"add-child"},qt={key:1},Ht={class:"add-child"},Wt={name:"JsonTreeNode"},Gt=Ne({...Wt,props:{name:{type:String,default:void 0},value:{type:[String,Number,Boolean,Object,Array],required:!0},path:{type:String,required:!0},expandedPaths:{type:Object,required:!0}},emits:["update:name","update:value","remove","add-child","toggle-expand"],setup(ee,{emit:de}){const c=ee,S=de,{t:w}=eu.exports.useI18n(),d=ae(()=>c.expandedPaths.has(c.path)),E=ae(()=>c.value!==null&&typeof c.value=="object"),k=ae(()=>Array.isArray(c.value)),V=ae(()=>E.value),P=ae(()=>c.value===null?"null":typeof c.value=="string"?`"${c.value}"`:typeof c.value>"u"?"undefined":String(c.value)),r=ae(()=>c.value===null?"null-value":typeof c.value=="string"?"string-value":typeof c.value=="number"?"number-value":typeof c.value=="boolean"?"boolean-value":""),T=ae(()=>E.value?Object.keys(c.value).length:0),W=ae(()=>!E.value||k.value?[]:Object.keys(c.value)),ue=ae(()=>c.value),x=F(!1),N=F(!1),X=F(""),M=F("string"),re=F(""),m=F(void 0),G=F(!1),z=F(null),C=F(null);function p(){X.value=c.name,x.value=!0,Fu(()=>{var K;(K=z.value)==null||K.focus()})}function v(){x.value&&(X.value.trim()&&S("update:name",X.value.trim()),x.value=!1)}function $(){x.value=!1}function L(){E.value||(c.value===null?M.value="null":Array.isArray(c.value)?M.value="array":M.value=typeof c.value,M.value==="string"?re.value=c.value:M.value==="number"?m.value=c.value:M.value==="boolean"&&(G.value=c.value),N.value=!0,Fu(()=>{var K;(K=C.value)==null||K.focus()}))}function I(){if(N.value){let K;M.value==="string"?K=re.value:M.value==="number"?K=m.value:M.value==="boolean"?K=G.value:M.value==="null"?K=null:M.value==="object"?K={}:M.value==="array"&&(K=[]),S("update:value",K),N.value=!1}}function Q(){N.value=!1}function se(){V.value&&S("toggle-expand",c.path)}function le(K){S("toggle-expand",K)}function ve(){S("remove")}function ce(){if(!E.value){let K;const j="object";K={},S("add-child",{type:j,value:K})}}function J(){if(!E.value||k.value)return;const K=Ue(c.value),j={...c.value,[K]:""};S("update:value",j)}function pe(K,j){if(!E.value||k.value||K===j)return;const oe=c.value;if(Object.prototype.hasOwnProperty.call(oe,j))return;const te={};for(const o in oe)o===K?te[j]=oe[o]:te[o]=oe[o];S("update:value",te)}function we(K,j){if(!E.value||k.value)return;const oe={...c.value,[K]:j};S("update:value",oe)}function Ve(K){if(!E.value||k.value)return;const j={...c.value};delete j[K],S("update:value",j)}function Be(K,{type:j,value:oe}){if(!E.value||k.value)return;const te={...c.value};te[K]=oe,S("update:value",te)}function _e(){if(!E.value||!k.value)return;const K=[...c.value];K.push(""),S("update:value",K)}function Ce(K,j){if(!E.value||!k.value)return;const oe=[...c.value];oe[K]=j,S("update:value",oe)}function H(K){if(!E.value||!k.value)return;const j=[...c.value];j.splice(K,1),S("update:value",j)}function Fe(K,{type:j,value:oe}){if(!E.value||!k.value)return;const te=[...c.value];te[K]=oe,S("update:value",te)}function Ue(K){let j="key",oe=1,te=`${j}${oe}`;for(;Object.prototype.hasOwnProperty.call(K,te);)oe++,te=`${j}${oe}`;return te}return(K,j)=>{const oe=Ju,te=_u,o=gu,h=vl,D=Te,O=cl("json-tree-node",!0);return n(),y("div",{class:Oe(["json-tree-node",{"json-tree-node-expanded":d.value}])},[f("div",It,[V.value?(n(),y("div",{key:0,class:"expand-btn",onClick:se},[d.value?(n(),R(b(Ql),{key:1})):(n(),R(b(Yl),{key:0}))])):(n(),y("div",Nt)),ee.name!==void 0?(n(),y("div",Tt,[x.value?(n(),R(oe,{key:0,ref_key:"nameInputRef",ref:z,modelValue:X.value,"onUpdate:modelValue":j[0]||(j[0]=U=>X.value=U),size:"mini",style:{width:"120px"},onBlur:v,onKeyup:[We(v,["enter"]),We($,["esc"])]},null,8,["modelValue"])):(n(),y("span",{key:1,class:"name-text",onDblclick:p},t(ee.name),33)),j[5]||(j[5]=f("span",{class:"name-colon"},":",-1))])):ie("",!0),f("div",Jt,[E.value?(n(),y("span",{key:0,class:"value-text object-value",onClick:se},[i(t(k.value?"[...]":"{...}")+" ",1),f("span",Kt,t(T.value)+" "+t(b(w)("\u9879")),1)])):(n(),y(ne,{key:1},[N.value?(n(),R(o,{key:0,modelValue:M.value,"onUpdate:modelValue":j[1]||(j[1]=U=>M.value=U),style:{width:"90px","margin-right":"8px"},size:"mini"},{default:u(()=>[e(te,{value:"string"},{default:u(()=>[i(t(b(w)("\u5B57\u7B26\u4E32")),1)]),_:1}),e(te,{value:"number"},{default:u(()=>[i(t(b(w)("\u6570\u5B57")),1)]),_:1}),e(te,{value:"boolean"},{default:u(()=>[i(t(b(w)("\u5E03\u5C14\u503C")),1)]),_:1}),e(te,{value:"null"},{default:u(()=>j[6]||(j[6]=[i("null")])),_:1}),e(te,{value:"object"},{default:u(()=>[i(t(b(w)("\u5BF9\u8C61")),1)]),_:1}),e(te,{value:"array"},{default:u(()=>[i(t(b(w)("\u6570\u7EC4")),1)]),_:1})]),_:1},8,["modelValue"])):ie("",!0),N.value?(n(),y("div",Rt,[M.value==="string"?(n(),R(oe,{key:0,ref_key:"valueInputRef",ref:C,modelValue:re.value,"onUpdate:modelValue":j[2]||(j[2]=U=>re.value=U),size:"mini",style:{width:"200px"},onBlur:I,onKeyup:[We(I,["enter"]),We(Q,["esc"])]},null,8,["modelValue"])):M.value==="number"?(n(),R(h,{key:1,ref_key:"valueInputRef",ref:C,modelValue:m.value,"onUpdate:modelValue":j[3]||(j[3]=U=>m.value=U),size:"mini",style:{width:"140px"},onBlur:I,onKeyup:[We(I,["enter"]),We(Q,["esc"])]},null,8,["modelValue"])):M.value==="boolean"?(n(),R(o,{key:2,modelValue:G.value,"onUpdate:modelValue":j[4]||(j[4]=U=>G.value=U),size:"mini",style:{width:"80px"},onBlur:I,onChange:I},{default:u(()=>[e(te,{value:!0},{default:u(()=>j[7]||(j[7]=[i("true")])),_:1}),e(te,{value:!1},{default:u(()=>j[8]||(j[8]=[i("false")])),_:1})]),_:1},8,["modelValue"])):M.value==="null"?(n(),y(ne,{key:3},[j[9]||(j[9]=f("span",{class:"null-value"},"null",-1)),e(D,{size:"mini",type:"text",onClick:I},{default:u(()=>[i(t(b(w)("\u786E\u5B9A")),1)]),_:1})],64)):M.value==="object"||M.value==="array"?(n(),y(ne,{key:4},[f("span",Pt,t(M.value==="object"?"{}":"[]"),1),e(D,{size:"mini",type:"text",onClick:I},{default:u(()=>[i(t(b(w)("\u786E\u5B9A")),1)]),_:1})],64)):ie("",!0)])):(n(),y("span",{key:2,class:Oe(["value-text",r.value]),onDblclick:L},t(P.value),35))],64))]),f("div",zt,[E.value?(n(),R(D,{key:0,type:"text",size:"mini",onClick:ce},{icon:u(()=>[e(b(Re))]),_:1})):ie("",!0),e(D,{type:"text",status:"danger",size:"mini",onClick:ve},{icon:u(()=>[e(b(Tu))]),_:1})])]),E.value&&d.value?(n(),y("div",Lt,[k.value?(n(),y("div",Mt,[(n(!0),y(ne,null,ye(ue.value,(U,q)=>(n(),y("div",{key:q,class:"child-node"},[e(O,{value:U,path:`${ee.path}.${q}`,"expanded-paths":ee.expandedPaths,"onUpdate:value":Ee=>Ce(Number(q),Ee),onRemove:Ee=>H(Number(q)),onAddChild:Ee=>Fe(Number(q),Ee),onToggleExpand:le},null,8,["value","path","expanded-paths","onUpdate:value","onRemove","onAddChild"])]))),128)),f("div",xt,[e(D,{type:"dashed",size:"small",onClick:_e},{icon:u(()=>[e(b(Re))]),default:u(()=>[i(" "+t(b(w)("\u6DFB\u52A0\u6570\u7EC4\u9879")),1)]),_:1})])])):(n(),y("div",qt,[(n(!0),y(ne,null,ye(W.value,U=>(n(),y("div",{key:U,class:"child-node"},[e(O,{name:U,value:ue.value[U],path:`${ee.path}.${U}`,"expanded-paths":ee.expandedPaths,"onUpdate:name":q=>pe(U,q),"onUpdate:value":q=>we(U,q),onRemove:q=>Ve(U),onAddChild:q=>Be(U,q),onToggleExpand:le},null,8,["name","value","path","expanded-paths","onUpdate:name","onUpdate:value","onRemove","onAddChild"])]))),128)),f("div",Ht,[e(D,{type:"dashed",size:"small",onClick:J},{icon:u(()=>[e(b(Re))]),default:u(()=>[i(" "+t(b(w)("\u6DFB\u52A0\u952E\u503C\u5BF9")),1)]),_:1})])]))])):ie("",!0)],2)}}});const il=Ie(Gt,[["__scopeId","data-v-3e9eb90e"]]),Zt={class:"json-tree-editor"},Xt={class:"json-tree-toolbar"},Yt={key:0,class:"tree-header"},Qt={key:1,class:"tree-header"},ea={class:"tree-add"},ua={class:"tree-add"},la={name:"JsonTreeEditor"},ta=Ne({...la,props:{modelValue:{type:String,required:!0},height:{type:[String,Number],default:400},mode:{type:String,default:"object"}},emits:["update:modelValue","apply"],setup(ee,{emit:de}){const c=ee,S=de,{t:w}=eu.exports.useI18n(),d=F(c.mode==="object"?{}:[]),E=F(new Set),k=ae(()=>Array.isArray(d.value));try{const C=JSON.parse(c.modelValue);c.mode==="object"&&typeof C=="object"&&!Array.isArray(C)||c.mode==="array"&&Array.isArray(C)?d.value=C:d.value=c.mode==="object"?{}:[]}catch(C){console.error("Invalid JSON:",C),d.value=c.mode==="object"?{}:[]}he(()=>c.modelValue,C=>{try{const p=JSON.parse(C);(c.mode==="object"&&typeof p=="object"&&!Array.isArray(p)||c.mode==="array"&&Array.isArray(p))&&(d.value=p)}catch(p){console.error("Invalid JSON:",p)}}),he(d,()=>{try{const C=JSON.stringify(d.value);S("update:modelValue",C)}catch(C){console.error("Error stringifying JSON:",C)}},{deep:!0});function V(){const C=z(d.value);d.value[C]=""}function P(C,p){if(C===p)return;if(Object.prototype.hasOwnProperty.call(d.value,p)){A.warning(w("\u952E\u540D\u5DF2\u5B58\u5728"));return}const v=d.value[C];delete d.value[C],d.value[p]=v}function r(C,p){d.value[C]=p}function T(C){delete d.value[C]}function W(C,{type:p,value:v}){if(typeof d.value[C]=="object"&&d.value[C]!==null)if(Array.isArray(d.value[C]))d.value[C].push(v);else{const $=z(d.value[C]);d.value[C][$]=v}else d.value[C]=p==="array"?[v]:{[z({})]:v}}function ue(){d.value.push("")}function x(C,p){d.value[C]=p}function N(C){d.value.splice(C,1)}function X(C,{type:p,value:v}){if(typeof d.value[C]=="object"&&d.value[C]!==null)if(Array.isArray(d.value[C]))d.value[C].push(v);else{const $=z(d.value[C]);d.value[C][$]=v}else d.value[C]=p==="array"?[v]:{[z({})]:v}}function M(){k.value?ue():V()}function re(C){E.value.has(C)?E.value.delete(C):E.value.add(C)}function m(){function C(p,v=""){p===null||typeof p!="object"||Object.keys(p).forEach($=>{const L=v?`${v}.${$}`:$;E.value.add(L),p[$]!==null&&typeof p[$]=="object"&&C(p[$],L)})}E.value.clear(),C(d.value)}function G(){E.value.clear()}function z(C){let p="key",v=1,$=`${p}${v}`;for(;Object.prototype.hasOwnProperty.call(C,$);)v++,$=`${p}${v}`;return $}return(C,p)=>{const v=Te,$=ze;return n(),y("div",Zt,[f("div",Xt,[e($,null,{default:u(()=>[e(v,{type:"text",size:"small",onClick:M},{icon:u(()=>[e(b(Re))]),default:u(()=>[i(" "+t(b(w)("\u6DFB\u52A0\u6839\u8282\u70B9")),1)]),_:1}),e(v,{type:"text",size:"small",onClick:p[0]||(p[0]=L=>S("apply",JSON.stringify(d.value)))},{icon:u(()=>[e(b(et))]),default:u(()=>[i(" "+t(b(w)("\u5E94\u7528")),1)]),_:1}),e(v,{type:"text",size:"small",onClick:m},{icon:u(()=>[e(b(Jl))]),default:u(()=>[i(" "+t(b(w)("\u5168\u90E8\u5C55\u5F00")),1)]),_:1}),e(v,{type:"text",size:"small",onClick:G},{icon:u(()=>[e(b(Kl))]),default:u(()=>[i(" "+t(b(w)("\u5168\u90E8\u6298\u53E0")),1)]),_:1})]),_:1})]),f("div",{class:"tree-container",style:dl({height:`${ee.height}px`})},[k.value?(n(),y("div",Yt,t(b(w)("\u6570\u7EC4"))+" ["+t(d.value.length)+" "+t(b(w)("\u9879"))+"]",1)):(n(),y("div",Qt,t(b(w)("\u5BF9\u8C61"))+" ["+t(Object.keys(d.value).length)+" "+t(b(w)("\u9879"))+"]",1)),k.value?(n(),y(ne,{key:2},[(n(!0),y(ne,null,ye(d.value,(L,I)=>(n(),y("div",{key:I,class:"tree-item"},[e(il,{value:L,path:String(I),"expanded-paths":E.value,"onUpdate:value":Q=>x(I,Q),onRemove:Q=>N(I),onAddChild:Q=>X(I,Q),onToggleExpand:re},null,8,["value","path","expanded-paths","onUpdate:value","onRemove","onAddChild"])]))),128)),f("div",ea,[e(v,{type:"dashed",size:"small",long:"",onClick:ue},{icon:u(()=>[e(b(Re))]),default:u(()=>[i(" "+t(b(w)("\u6DFB\u52A0\u6570\u7EC4\u9879")),1)]),_:1})])],64)):(n(),y(ne,{key:3},[(n(!0),y(ne,null,ye(Object.keys(d.value),L=>(n(),y("div",{key:L,class:"tree-item"},[e(il,{name:L,value:d.value[L],path:L,"expanded-paths":E.value,"onUpdate:name":I=>P(L,I),"onUpdate:value":I=>r(L,I),onRemove:I=>T(L),onAddChild:I=>W(L,I),onToggleExpand:re},null,8,["name","value","path","expanded-paths","onUpdate:name","onUpdate:value","onRemove","onAddChild"])]))),128)),f("div",ua,[e(v,{type:"dashed",size:"small",long:"",onClick:V},{icon:u(()=>[e(b(Re))]),default:u(()=>[i(" "+t(b(w)("\u6DFB\u52A0\u952E\u503C\u5BF9")),1)]),_:1})])],64))],4)])}}});const aa=Ie(ta,[["__scopeId","data-v-16751b46"]]),oa={class:"editor-container"},na={class:"editor-toolbar"},sa={class:"editor-content"},ia={key:0,class:"tree-editor-wrapper"},ra={key:1,class:"code-editor-wrapper"},da={class:"modal-footer"},ca={name:"JsonTreeEditorModal"},va=Ne({...ca,props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},value:{type:String,default:""},width:{type:[String,Number],default:800},placeholder:{type:String,default:""},fieldKey:{type:String,default:""},mode:{type:String,default:"object"}},emits:["update:visible","update:value","apply","close"],setup(ee,{emit:de}){const c=ee,S=de,{t:w}=eu.exports.useI18n(),d=F(c.value),E=F(),k=F(),V=F(500),P=F("tree"),r=ae(()=>{if(!d.value.trim())return!0;try{const x=JSON.parse(d.value);return!(c.mode==="object"&&!T(x)||c.mode==="array"&&!Array.isArray(x))}catch{return!1}});function T(x){return x!==null&&typeof x=="object"&&!Array.isArray(x)}he(()=>c.value,x=>{x!==d.value&&(d.value=x)}),he(()=>c.visible,x=>{x&&(d.value=c.value)});const W=()=>{r.value&&(S("apply",{key:c.fieldKey,value:d.value}),S("update:value",d.value),S("update:visible",!1))},ue=()=>{S("update:visible",!1),S("close")};return(x,N)=>{const X=Ku,M=Ru,re=Te,m=ze,G=Pe;return n(),R(G,{visible:ee.visible,title:ee.title||b(w)("JSON\u7F16\u8F91\u5668 (\u6811\u5F62\u89C6\u56FE)"),width:ee.width,"mask-closable":!1,"esc-to-close":!1,footer:!1,"unmount-on-close":!1,onClose:ue,class:"json-tree-editor-modal"},{default:u(()=>[f("div",oa,[f("div",na,[e(M,{modelValue:P.value,"onUpdate:modelValue":N[0]||(N[0]=z=>P.value=z),type:"button"},{default:u(()=>[e(X,{value:"tree"},{default:u(()=>[i(t(b(w)("\u6811\u5F62\u7F16\u8F91\u5668")),1)]),_:1}),e(X,{value:"code"},{default:u(()=>[i(t(b(w)("\u4EE3\u7801\u7F16\u8F91\u5668")),1)]),_:1})]),_:1},8,["modelValue"])]),f("div",sa,[P.value==="tree"?(n(),y("div",ia,[e(aa,{ref_key:"treeEditorRef",ref:E,modelValue:d.value,"onUpdate:modelValue":N[1]||(N[1]=z=>d.value=z),height:V.value,mode:ee.mode,onApply:W},null,8,["modelValue","height","mode"])])):(n(),y("div",ra,[e(Dl,{ref_key:"codeEditorRef",ref:k,modelValue:d.value,"onUpdate:modelValue":N[2]||(N[2]=z=>d.value=z),height:V.value,placeholder:ee.placeholder,mode:ee.mode,onApply:W},null,8,["modelValue","height","placeholder","mode"])]))])]),f("div",da,[e(m,null,{default:u(()=>[e(re,{onClick:ue},{default:u(()=>[i(t(b(w)("\u53D6\u6D88")),1)]),_:1}),e(re,{type:"primary",disabled:!r.value,onClick:W},{default:u(()=>[i(t(b(w)("\u786E\u5B9A")),1)]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["visible","title","width"])}}});const fa=Ie(va,[["__scopeId","data-v-84bb24f0"]]),pa={class:"config-editor"},ma={key:1},ya={class:"editor-toolbar"},Fa={key:0,class:"empty-config"},Ea={key:1,class:"config-fields"},_a={class:"config-key"},ga={class:"key-text"},ha={class:"config-value-cell"},Ca={key:4,class:"bool-field"},Da={key:5,class:"ref-field"},ba={class:"current-ref-path"},Ba={style:{"font-weight":"bold"}},$a={key:0,class:"error-text"},ka={key:6,class:"object-field"},Aa={class:"json-editor-container"},wa={class:"json-actions"},Va={key:7,class:"array-field"},Sa={class:"json-editor-container"},ja={class:"json-actions"},Oa={key:4,class:"ref-path-input"},Ua={class:"ref-input-row"},Ia={style:{"margin-top":"10px"}},Na={class:"current-ref-path",style:{"margin-top":"8px"}},Ta={style:{"font-weight":"bold"}},Ja={key:0,class:"error-text"},Ka={class:"field-description",style:{"margin-top":"8px"}},Ra={key:0,class:"action-buttons"},Pa={key:0,class:"action-buttons"},za={class:"batch-select-container"},La={class:"batch-select-header"},Ma={key:0,class:"batch-filter"},xa={key:0,class:"config-selector"},qa={class:"tree-hint"},Ha={key:1,class:"path-list"},Wa={class:"path-list-header"},Ga={class:"field-prefix-input"},Za={class:"field-description"},Xa={class:"batch-select-preview"},Ya={class:"preview-header"},Qa={class:"preview-count"},eo={key:0,class:"preview-content"},uo={class:"preview-list-header"},lo={class:"preview-field-name"},to={class:"preview-field-value"},ao={class:"preview-list-body"},oo={class:"preview-field-name"},no={class:"preview-field-value"},so={class:"preview-field-name"},io={class:"preview-field-value"},ro={key:1,class:"empty-preview"},co={class:"batch-select-container"},vo={class:"batch-select-header"},fo={key:0,class:"batch-filter"},po={key:0,class:"config-selector"},mo={class:"tree-hint"},yo={key:1,class:"path-list"},Fo={class:"field-ref-preview"},Eo={class:"preview-header"},_o={class:"preview-content"},go={key:0,class:"preview-item"},ho={key:1,class:"preview-item"},Co={key:2,class:"empty-preview"},Do={class:"json-preview-container"},bo={key:2,class:"json-content"},Bo={class:"json-preview-actions"},$o={name:"ConfigEditor"},ko=Ne({...$o,props:{configItem:{type:Object,default:null},env:{type:String,default:"dev"}},emits:["update"],setup(ee,{emit:de}){const c=ee,S=de,{t:w}=eu.exports.useI18n(),d=Qe({}),E=new Map,k=ae(()=>(c.configItem&&(console.log("\u914D\u7F6E\u7F16\u8F91\u5668\u6536\u5230\u914D\u7F6E\u9879:",c.configItem),console.log("\u914D\u7F6E\u9879\u503C:",c.configItem.value),Object.keys(d).forEach(l=>{delete d[l]}),E.clear(),c.configItem.value&&Object.keys(c.configItem.value).forEach(l=>{if(c.configItem&&c.configItem.value&&c.configItem.value[l]){const a={...c.configItem.value[l]};if(a.type==="int"&&a.value?a.value=parseInt(a.value):a.type==="float"&&a.value?a.value=parseFloat(a.value):a.type==="bool"&&a.value!==void 0&&(a.value=a.value==="true"),a.type==="ref"&&typeof a.value=="string"){const g=a.value.split(".");E.set(l,{configKey:g[0]||"",propertyPath:g.slice(1).join(".")||""})}d[l]=a}}),console.log("\u521D\u59CB\u5316\u540E\u7684\u914D\u7F6E\u503C:",d)),c.configItem));he(()=>c.configItem,l=>{l&&(console.log("\u914D\u7F6E\u9879\u53D8\u5316\uFF0C\u91CD\u65B0\u521D\u59CB\u5316\u503C"),k.value)},{immediate:!0});const V=F(!1),P=F(),r=Qe({key:"",type:"string",value:""}),T=F(void 0),W=F(void 0),ue=F([]),x=F({}),N=F(""),X=F(""),M=ae(()=>x.value[N.value]||[]),re=()=>{N.value&&X.value?r.value=`${N.value}.${X.value}`:N.value?r.value=N.value:r.value=""},m=async()=>{try{const l=await hl();ue.value=l.map(a=>a.key);for(const a of l)if(a.value){const g=[];G(a.value,"",g),x.value[a.key]=g}return console.log("\u52A0\u8F7D\u914D\u7F6E\u952E\u6210\u529F:",ue.value),Promise.resolve()}catch(l){return console.error("\u52A0\u8F7D\u914D\u7F6E\u952E\u5931\u8D25:",l),ue.value=[],Promise.reject(l)}};function G(l,a,g){if(!(!l||typeof l!="object"))for(const _ in l){const Z=a?`${a}.${_}`:_;g.push(Z),l[_]&&typeof l[_]=="object"&&l[_].value&&typeof l[_].value=="object"&&G(l[_].value,Z,g)}}m().catch(l=>{console.error("\u521D\u59CB\u5316\u52A0\u8F7D\u914D\u7F6E\u952E\u5931\u8D25:",l),A.error("\u52A0\u8F7D\u914D\u7F6E\u9879\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5")}),he(()=>r.type,l=>{if(l==="bool")r.value="false";else if(l==="int"||l==="float")r.value="0",T.value=0,W.value=0;else if(l==="object")r.value="{}";else if(l==="array")r.value="[]";else if(l==="ref"){const a=r.value.split(".");a.length>0?(N.value=a[0],X.value=a.slice(1).join(".")):(N.value="",X.value="")}else r.value=""}),he([N,X],()=>{re()}),he(T,l=>{l!==void 0&&r.type==="int"&&(r.value=String(l))}),he(W,l=>{l!==void 0&&r.type==="float"&&(r.value=String(l))});function z(){V.value=!0}function C(l){if(!l)return!0;try{return JSON.parse(l),!0}catch{return!1}}function p(l){try{return JSON.stringify(JSON.parse(l),null,2)}catch{return l}}function v(){C(r.value)&&(r.value=p(r.value))}async function $(){if(!P.value)return!1;try{if(await P.value.validate(),d[r.key])return A.error("\u5B57\u6BB5\u540D\u5DF2\u5B58\u5728"),!1;if((r.type==="object"||r.type==="array")&&r.value&&!C(r.value))return A.error("JSON\u683C\u5F0F\u4E0D\u6B63\u786E"),!1;(r.type==="object"||r.type==="array")&&r.value&&C(r.value)&&(r.value=p(r.value));let l=r.value;return r.type==="int"?l=T.value!==void 0?T.value:0:r.type==="float"?l=W.value!==void 0?W.value:0:r.type==="bool"&&(l=r.value==="true"),d[r.key]={type:r.type,value:l},L(),!0}catch(l){return console.error(l),!1}}function L(){var l;r.key="",r.type="string",r.value="",T.value=void 0,W.value=void 0,N.value="",X.value="",(l=P.value)==null||l.clearValidate()}function I(l){confirm(`\u786E\u5B9A\u8981\u5220\u9664\u914D\u7F6E\u9879 "${l}" \u5417\uFF1F`)&&delete d[l]}async function Q(){if(!c.configItem){A.error("\u914D\u7F6E\u9879\u4E0D\u5B58\u5728");return}try{const l={...c.configItem.metadata};c.env&&(l.environment=c.env);const a={};for(const g in d){const _={...d[g]};(_.type==="int"||_.type==="float"||_.type==="bool")&&(_.value=String(_.value)),a[g]=_}await Cl(c.configItem.key,{value:a,metadata:l}),A.success("\u914D\u7F6E\u4FDD\u5B58\u6210\u529F"),S("update")}catch(l){A.error("\u4FDD\u5B58\u914D\u7F6E\u5931\u8D25"),console.error(l)}}function se(l){if(l.type==="object"||l.type==="array")try{l.value=p(l.value)}catch(a){A.error("\u683C\u5F0F\u5316\u5931\u8D25"),console.error(a)}}function le(l){if(l.type==="object"||l.type==="array")try{return JSON.parse(l.value),!0}catch{return!1}return!0}function ve(l){return l?/^[a-zA-Z0-9_.-]+(\.[a-zA-Z0-9_.-]+)+$/.test(l):!0}function ce(l,a){var ge;if(E.has(l))return((ge=E.get(l))==null?void 0:ge.configKey)||"";const g=String(a.value||""),_=[...ue.value].sort((fe,je)=>je.length-fe.length);for(const fe of _)if(g.startsWith(fe+"."))return fe;const Z=g.split(".");return Z.length>0?Z[0]:""}function J(l,a){var ge;if(E.has(l))return((ge=E.get(l))==null?void 0:ge.propertyPath)||"";const g=String(a.value||""),_=[...ue.value].sort((fe,je)=>je.length-fe.length);for(const fe of _)if(g.startsWith(fe+"."))return g.substring(fe.length+1);const Z=g.split(".");return Z.length>1?Z.slice(1).join("."):""}function pe(l,a,g){const _=J(l,a);E.set(l,{configKey:g,propertyPath:_}),_?a.value=`${g}.${_}`:a.value=g}function we(l,a,g){const _=ce(l,a);E.set(l,{configKey:_,propertyPath:g}),_&&g?a.value=`${_}.${g}`:_?a.value=_:a.value=""}function Ve(l){const a=ce(l,d[l]);return a?x.value[a]||[]:[]}const Be=F(!1),_e=F(""),Ce=F("all"),H=F([]),Fe=F([]),Ue=F(""),K=F(""),j=F(["all"]),oe=F(!1),te=F(null),o=F(""),h=F("all"),D=F([]),O=F(""),U=F(""),q=F(!1),Ee=ae(()=>{if(!Array.isArray(ue.value)||ue.value.length===0)return[{key:"all",title:"\u6240\u6709\u914D\u7F6E",selectable:!0,children:[]}];const l=new Map;return ue.value.forEach(g=>{var ge;let Z=g.split(".")[0];l.has(Z)||l.set(Z,[]),(ge=l.get(Z))==null||ge.push(g)}),[{key:"all",title:"\u6240\u6709\u914D\u7F6E",selectable:!0,children:Array.from(l.entries()).map(([g,_])=>({key:g,title:g,selectable:!0,children:_.map(Z=>{const ge=Array.isArray(x.value[Z])?x.value[Z]:[],fe=Z.substring(g.length+1)||Z;return{key:Z,title:fe,selectable:!0,children:ge.map(je=>({key:`${Z}.${je}`,title:je,isLeaf:!0,selectable:!0}))}})}))}]}),Je=ae(()=>Ue.value?(x.value[_e.value]||[]).filter(l=>l.toLowerCase().includes(Ue.value.toLowerCase())):x.value[_e.value]||[]),be=ae(()=>U.value?(x.value[o.value]||[]).filter(l=>l.toLowerCase().includes(U.value.toLowerCase())):x.value[o.value]||[]);function Se(l){return l.includes(".")}function Ae(l){return l.isLeaf===!0}function Le(l,a){const g=a.node.key;a.selected&&a.node.isLeaf?H.value.includes(g)?H.value=H.value.filter(_=>_!==g):H.value=[...H.value,g]:a.node.isLeaf||(j.value.includes(g)?j.value=j.value.filter(_=>_!==g):j.value=[...j.value,g])}function $e(l){const a=l.split(".");if(a.length<2)return l;const g=a[a.length-1];let _="";return K.value&&(_=`${K.value}_`),_+=g,_}function Ke(l,a){const g=a.split("."),_=g[g.length-1];let Z="";return K.value&&(Z=`${K.value}_`),Z+=_,Z}function Me(){try{return Ce.value==="all"?Array.isArray(H.value)?H.value.filter(l=>Se(l)).length:0:Array.isArray(Fe.value)?Fe.value.length:0}catch(l){return console.error("\u8BA1\u7B97\u9009\u4E2D\u9879\u6570\u91CF\u51FA\u9519:",l),0}}function Du(){Fe.value=Je.value}function Ge(){Fe.value=[]}function bu(){H.value=[],Fe.value=[],_e.value="",Ce.value="all",Ue.value="",K.value="",m().then(()=>{Be.value=!0})}function xe(l,a){te.value={key:l,field:a},q.value=!1;const g=ce(l,a);if(g){o.value=g,h.value=g;const _=J(l,a);_?O.value=_:O.value=""}else h.value="all",O.value="";D.value=[],U.value="",oe.value=!0}function De(){te.value=null,q.value=!0,N.value?(o.value=N.value,h.value=N.value,X.value?O.value=X.value:O.value=""):(h.value="all",O.value=""),D.value=[],U.value="",oe.value=!0}function ke(l,a){a.selected&&a.node.isLeaf?D.value=[a.node.key]:!a.selected&&a.node.isLeaf&&(D.value=[])}function nu(l){Array.isArray(l)?H.value=l:l&&Array.isArray(l.checked)?H.value=l.checked:H.value=[],console.log("\u6811\u9009\u62E9\u7ED3\u679C:",H.value)}function uu(){let l=[];try{if(Ce.value==="all"?Array.isArray(H.value)&&(l=H.value.filter(g=>Se(g)).map(g=>({key:$e(g),value:g}))):_e.value&&Array.isArray(Fe.value)&&Fe.value.length>0&&(l=Fe.value.map(g=>({key:Ke(_e.value,g),value:`${_e.value}.${g}`}))),l.length===0)return A.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u5C5E\u6027\u8DEF\u5F84"),!1;console.log("\u5373\u5C06\u6DFB\u52A0\u5B57\u6BB5:",l);const a=l.filter(g=>d[g.key]);if(a.length>0){const g=a.map(_=>_.key).join(", ");return A.warning(`\u4EE5\u4E0B\u5B57\u6BB5\u540D\u5DF2\u5B58\u5728: ${g}`),!1}return l.forEach(g=>{d[g.key]={type:"ref",value:g.value};const _=ce(g.key,d[g.key]),Z=J(g.key,d[g.key]);_&&E.set(g.key,{configKey:_,propertyPath:Z})}),A.success(`\u5DF2\u6279\u91CF\u6DFB\u52A0 ${l.length} \u4E2A\u5F15\u7528\u914D\u7F6E\u9879`),Be.value=!1,!0}catch(a){return console.error("\u6279\u91CF\u6DFB\u52A0\u5B57\u6BB5\u51FA\u9519:",a),A.error("\u6279\u91CF\u6DFB\u52A0\u5B57\u6BB5\u5931\u8D25"),!1}}function qe(){let l="";if(h.value==="all"&&D.value.length>0?l=D.value[0]:O.value&&(l=`${o.value}.${O.value}`),!l)return A.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5F15\u7528\u8DEF\u5F84"),!1;if(q.value){r.value=l;const a=[...ue.value].sort((_,Z)=>Z.length-_.length);let g="";for(const _ of a)if(l.startsWith(_+".")){g=_;break}if(g)N.value=g,X.value=l.substring(g.length+1);else{const _=l.split(".");N.value=_[0],X.value=_.slice(1).join(".")}}else if(te.value){const{key:a,field:g}=te.value;g.value=l;const _=[...ue.value].sort((fe,je)=>je.length-fe.length);let Z="",ge="";for(const fe of _)if(l.startsWith(fe+".")){Z=fe,ge=l.substring(fe.length+1);break}if(!Z){const fe=l.split(".");Z=fe[0],ge=fe.slice(1).join(".")}E.set(a,{configKey:Z,propertyPath:ge})}return oe.value=!1,!0}function lu(){Be.value=!1}function su(){oe.value=!1,te.value=null,D.value=[],O.value=""}const He=F(""),Bu=ae(()=>{const l=Object.entries(d).map(([a,g])=>({key:a,field:g,refConfigKey:ce(a,g),refPropertyPath:J(a,g)}));return He.value?l.filter(a=>a.key.toLowerCase().includes(He.value.toLowerCase())||String(a.field.value).toLowerCase().includes(He.value.toLowerCase())):l});function $u(){}function ku(l){navigator.clipboard.writeText(l).then(()=>{A.success(w("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"))}).catch(()=>{A.error(w("\u590D\u5236\u5931\u8D25"))})}const iu=F(!1),B=F(""),Hu=F(""),bl=F(""),Wu=F(null),Bl=F("object"),Au=F(!1),Gu=F(""),wu=F(""),Zu=F(""),Vu=F(null),Xu=F("object");function Yu(l,a){if(!le(a)){A.warning(w("JSON\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u65E0\u6CD5\u5C55\u5F00\u7F16\u8F91"));return}wu.value=a.value,Zu.value=l,Vu.value=a,Xu.value=a.type==="object"?"object":"array",Gu.value=`${w("\u7F16\u8F91")} ${l} (${a.type==="object"?w("\u5BF9\u8C61"):w("\u6570\u7EC4")})`,Au.value=!0}function $l(l){try{Wu.value&&d[l.key]&&(Wu.value.value=l.value,A.success(w("\u66F4\u65B0\u6210\u529F")))}catch(a){console.error("\u5E94\u7528JSON\u7F16\u8F91\u5668\u66F4\u6539\u5931\u8D25:",a),A.error(w("\u5E94\u7528\u66F4\u6539\u5931\u8D25"))}}function kl(l){try{Vu.value&&d[l.key]&&(Vu.value.value=l.value,A.success(w("\u66F4\u65B0\u6210\u529F")))}catch(a){console.error("\u5E94\u7528JSON\u7F16\u8F91\u5668\u66F4\u6539\u5931\u8D25:",a),A.error(w("\u5E94\u7528\u66F4\u6539\u5931\u8D25"))}}const Qu=F(600);function Su(){const l=window.innerHeight,a=250;Qu.value=Math.max(500,Math.floor(l*.9-a))}ou(()=>{Su(),window.addEventListener("resize",Su)}),ut(()=>{window.removeEventListener("resize",Su)});function el(){const l=["all"];function a(g){for(const _ of g)_.children&&_.children.length>0&&(l.push(_.key),a(_.children))}Ee.value.length>0&&a(Ee.value[0].children),j.value=l}function ul(l,a){j.value=l}const ju=F(!1),ru=F(!1),du=F(""),cu=F(null),vu=ae(()=>{if(!cu.value)return"";try{return JSON.stringify(cu.value,null,2)}catch(l){return console.error("\u683C\u5F0F\u5316JSON\u9884\u89C8\u5931\u8D25:",l),""}});async function Al(){if(!c.configItem){A.error(w("\u914D\u7F6E\u9879\u4E0D\u5B58\u5728"));return}ju.value=!0,ru.value=!0,du.value="",cu.value=null;try{const l=await pt(c.configItem.key,c.env);cu.value=l,ru.value=!1}catch(l){console.error("\u83B7\u53D6JSON\u9884\u89C8\u5931\u8D25:",l),ru.value=!1,du.value=w("\u83B7\u53D6JSON\u9884\u89C8\u5931\u8D25")+": "+(l instanceof Error?l.message:String(l))}}function wl(){if(!!vu.value)try{navigator.clipboard.writeText(vu.value).then(()=>{A.success(w("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F"))}).catch(l=>{console.error("\u590D\u5236\u5931\u8D25:",l),A.error(w("\u590D\u5236\u5931\u8D25"))})}catch(l){console.error("\u590D\u5236JSON\u9884\u89C8\u5931\u8D25:",l),A.error(w("\u590D\u5236\u5931\u8D25"))}}return(l,a)=>{const g=Pu,_=Te,Z=ze,ge=zu,fe=fl,je=Lu,Vl=hu,Sl=Cu,ll=Eu,fu=pl,Ze=Ju,jl=ml,pu=vl,tl=lt,me=_u,Xe=gu,mu=tt,Ol=Mu,Ou=yl,Ul=Fl,yu=Pe,tu=Ku,Uu=Ru,al=El,Il=at,Nl=ot;return n(),y("div",pa,[ee.configItem?(n(),y("div",ma,[f("div",ya,[e(je,null,{default:u(()=>[e(ge,{span:16},{default:u(()=>[e(Z,null,{default:u(()=>[e(_,{type:"primary",status:"success",onClick:Q},{icon:u(()=>[e(b(Rl))]),default:u(()=>[i(" "+t(l.$t("\u4FDD\u5B58")),1)]),_:1}),e(_,{onClick:z},{icon:u(()=>[e(b(Re))]),default:u(()=>[i(" "+t(l.$t("\u6DFB\u52A0\u914D\u7F6E\u9879")),1)]),_:1}),e(_,{type:"outline",onClick:bu},{icon:u(()=>[e(b(Pl))]),default:u(()=>[i(" "+t(l.$t("\u6279\u91CF\u6DFB\u52A0\u5F15\u7528")),1)]),_:1}),e(_,{type:"outline",onClick:Al},{icon:u(()=>[e(b(rl))]),default:u(()=>[i(" "+t(l.$t("\u9884\u89C8JSON")),1)]),_:1})]),_:1})]),_:1}),e(ge,{span:8,style:{"text-align":"right"}},{default:u(()=>[Object.keys(d).length>5?(n(),R(fe,{key:0,modelValue:He.value,"onUpdate:modelValue":a[0]||(a[0]=s=>He.value=s),placeholder:l.$t("\u641C\u7D22\u914D\u7F6E\u9879"),style:{width:"200px"},"allow-clear":"",onSearch:$u},null,8,["modelValue","placeholder"])):ie("",!0)]),_:1})]),_:1})]),e(Vl,{style:{margin:"16px 0"}}),Object.keys(d).length===0?(n(),y("div",Fa,[e(Sl,{description:l.$t("\u6682\u65E0\u914D\u7F6E\u9879")},null,8,["description"]),e(_,{type:"outline",status:"success",style:{"margin-top":"16px"},onClick:z},{default:u(()=>[i(t(l.$t("\u6DFB\u52A0\u7B2C\u4E00\u4E2A\u914D\u7F6E\u9879")),1)]),_:1})])):(n(),y("div",Ea,[e(Ol,{data:Bu.value,pagination:!1,bordered:!0,class:"config-table",size:"medium",scroll:{y:Qu.value}},{columns:u(()=>[e(fu,{title:"\u914D\u7F6E\u9879","data-index":"key",width:140,fixed:"left"},{cell:u(({record:s})=>[f("div",_a,[f("span",ga,t(s.key),1),e(ll,{content:l.$t("\u590D\u5236\u952E\u540D")},{default:u(()=>[e(_,{type:"text",size:"mini",onClick:Y=>ku(s.key)},{icon:u(()=>[e(b(Iu))]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1}),e(fu,{title:l.$t("\u503C"),"data-index":"value"},{cell:u(({record:s})=>[f("div",ha,[s.field.type==="string"?(n(),R(Ze,{key:0,modelValue:s.field.value,"onUpdate:modelValue":Y=>s.field.value=Y,placeholder:l.$t("\u8BF7\u8F93\u5165\u5B57\u7B26\u4E32\u503C"),"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.field.type==="encrypted"?(n(),R(jl,{key:1,modelValue:s.field.value,"onUpdate:modelValue":Y=>s.field.value=Y,placeholder:l.$t("\u8BF7\u8F93\u5165\u52A0\u5BC6\u539F\u6587"),"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.field.type==="int"?(n(),R(pu,{key:2,modelValue:s.field.value,"onUpdate:modelValue":Y=>s.field.value=Y,placeholder:l.$t("\u8BF7\u8F93\u5165\u6574\u6570\u503C"),mode:"button",step:1,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.field.type==="float"?(n(),R(pu,{key:3,modelValue:s.field.value,"onUpdate:modelValue":Y=>s.field.value=Y,placeholder:l.$t("\u8BF7\u8F93\u5165\u6D6E\u70B9\u6570\u503C"),mode:"button",precision:2,step:.1,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])):s.field.type==="bool"?(n(),y("div",Ca,[e(tl,{modelValue:s.field.value,"onUpdate:modelValue":Y=>s.field.value=Y,type:"round",size:"medium"},null,8,["modelValue","onUpdate:modelValue"])])):s.field.type==="ref"?(n(),y("div",Da,[e(Z,{direction:"vertical",style:{width:"100%"}},{default:u(()=>[e(Z,null,{default:u(()=>[e(Xe,{modelValue:s.refConfigKey,"onUpdate:modelValue":Y=>s.refConfigKey=Y,placeholder:l.$t("\u9009\u62E9\u914D\u7F6E\u952E"),"allow-search":"",style:{"min-width":"200px"},onChange:Y=>pe(s.key,s.field,String(Y))},{default:u(()=>[(n(!0),y(ne,null,ye(ue.value,Y=>(n(),R(me,{key:Y,value:Y},{default:u(()=>[i(t(Y),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),e(Xe,{modelValue:s.refPropertyPath,"onUpdate:modelValue":Y=>s.refPropertyPath=Y,placeholder:l.$t("\u9009\u62E9\u5C5E\u6027\u8DEF\u5F84"),"allow-search":"","allow-create":"",style:{"min-width":"150px"},onChange:Y=>we(s.key,s.field,String(Y))},{default:u(()=>[(n(!0),y(ne,null,ye(Ve(s.key),Y=>(n(),R(me,{key:Y,value:Y},{default:u(()=>[i(t(Y),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),e(_,{type:"outline",size:"small",onClick:Y=>xe(s.key,s.field)},{default:u(()=>[i(t(l.$t("\u9009\u62E9\u5F15\u7528")),1)]),_:2},1032,["onClick"])]),_:2},1024),f("div",ba,[f("span",Ba,t(l.$t("\u5F53\u524D\u5F15\u7528\u8DEF\u5F84"))+"\uFF1A",1),f("span",{class:Oe({"error-text":!ve(String(s.field.value))})},t(String(s.field.value)||l.$t("\u672A\u8BBE\u7F6E")),3),!ve(String(s.field.value))&&String(s.field.value)?(n(),y("span",$a," ("+t(l.$t("\u683C\u5F0F\u4E0D\u6B63\u786E"))+") ",1)):ie("",!0)])]),_:2},1024)])):s.field.type==="object"?(n(),y("div",ka,[f("div",Aa,[e(mu,{modelValue:s.field.value,"onUpdate:modelValue":Y=>s.field.value=Y,placeholder:l.$t("\u8BF7\u8F93\u5165JSON\u5BF9\u8C61"),"auto-size":{minRows:3,maxRows:5},status:le(s.field)?void 0:"error",class:"json-textarea"},null,8,["modelValue","onUpdate:modelValue","placeholder","status"]),f("div",wa,[e(Z,null,{default:u(()=>[e(_,{size:"mini",type:"text",disabled:!le(s.field),onClick:Y=>se(s.field)},{default:u(()=>[i(t(l.$t("\u683C\u5F0F\u5316")),1)]),_:2},1032,["disabled","onClick"]),e(_,{size:"mini",type:"text",disabled:!le(s.field),onClick:Y=>Yu(s.key,s.field)},{default:u(()=>[i(t(l.$t("\u5C55\u5F00\u7F16\u8F91")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),f("div",{class:Oe(["field-description",{"error-text":!le(s.field)}])},t(le(s.field)?l.$t("JSON\u683C\u5F0F\u7684\u5BF9\u8C61\u6570\u636E"):l.$t("JSON\u683C\u5F0F\u4E0D\u6B63\u786E")),3)])])):s.field.type==="array"?(n(),y("div",Va,[f("div",Sa,[e(mu,{modelValue:s.field.value,"onUpdate:modelValue":Y=>s.field.value=Y,placeholder:l.$t("\u8BF7\u8F93\u5165JSON\u6570\u7EC4"),"auto-size":{minRows:3,maxRows:5},status:le(s.field)?void 0:"error",class:"json-textarea"},null,8,["modelValue","onUpdate:modelValue","placeholder","status"]),f("div",ja,[e(Z,null,{default:u(()=>[e(_,{size:"mini",type:"text",disabled:!le(s.field),onClick:Y=>se(s.field)},{default:u(()=>[i(t(l.$t("\u683C\u5F0F\u5316")),1)]),_:2},1032,["disabled","onClick"]),e(_,{size:"mini",type:"text",disabled:!le(s.field),onClick:Y=>Yu(s.key,s.field)},{default:u(()=>[i(t(l.$t("\u5C55\u5F00\u7F16\u8F91")),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),f("div",{class:Oe(["field-description",{"error-text":!le(s.field)}])},t(le(s.field)?l.$t("JSON\u683C\u5F0F\u7684\u6570\u7EC4\u6570\u636E"):l.$t("JSON\u683C\u5F0F\u4E0D\u6B63\u786E")),3)])])):ie("",!0)])]),_:1},8,["title"]),e(fu,{title:l.$t("\u7C7B\u578B"),width:150},{cell:u(({record:s})=>[e(Xe,{modelValue:s.field.type,"onUpdate:modelValue":Y=>s.field.type=Y,style:{width:"100%"}},{default:u(()=>[e(me,{value:"string"},{default:u(()=>[i(t(l.$t("\u5B57\u7B26\u4E32")),1)]),_:1}),e(me,{value:"encrypted"},{default:u(()=>[i(t(l.$t("\u52A0\u5BC6")),1)]),_:1}),e(me,{value:"int"},{default:u(()=>[i(t(l.$t("\u6574\u6570")),1)]),_:1}),e(me,{value:"float"},{default:u(()=>[i(t(l.$t("\u6D6E\u70B9\u6570")),1)]),_:1}),e(me,{value:"bool"},{default:u(()=>[i(t(l.$t("\u5E03\u5C14\u503C")),1)]),_:1}),e(me,{value:"ref"},{default:u(()=>[i(t(l.$t("\u5F15\u7528")),1)]),_:1}),e(me,{value:"object"},{default:u(()=>[i(t(l.$t("\u5BF9\u8C61")),1)]),_:1}),e(me,{value:"array"},{default:u(()=>[i(t(l.$t("\u6570\u7EC4")),1)]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["title"]),e(fu,{title:l.$t("\u64CD\u4F5C"),width:70,align:"center",fixed:"right"},{cell:u(({record:s})=>[e(ll,{content:l.$t("\u5220\u9664")},{default:u(()=>[e(_,{status:"danger",size:"mini",onClick:Y=>I(s.key)},{icon:u(()=>[e(b(Tu))]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["title"])]),_:1},8,["data","scroll"])]))])):(n(),R(g,{key:0,type:"warning",content:l.$t("\u914D\u7F6E\u9879\u4E0D\u5B58\u5728"),style:{"margin-bottom":"16px"}},null,8,["content"])),e(yu,{visible:V.value,"onUpdate:visible":a[11]||(a[11]=s=>V.value=s),title:l.$t("\u6DFB\u52A0\u914D\u7F6E\u9879"),"mask-closable":!1,"esc-to-close":!1,"footer-before":!0,class:"config-editor-modal",onBeforeOk:$,onCancel:L},{default:u(()=>[e(Ul,{ref_key:"addFieldFormRef",ref:P,model:r,"label-align":"left","label-col-props":{span:4},"wrapper-col-props":{span:20}},{default:u(()=>[e(Ou,{field:"key",label:l.$t("\u5B57\u6BB5\u540D"),rules:[{required:!0,message:l.$t("\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D")}]},{default:u(()=>[e(Ze,{modelValue:r.key,"onUpdate:modelValue":a[1]||(a[1]=s=>r.key=s),placeholder:l.$t("\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(Ou,{field:"type",label:l.$t("\u7C7B\u578B")},{default:u(()=>[e(Xe,{modelValue:r.type,"onUpdate:modelValue":a[2]||(a[2]=s=>r.type=s),placeholder:l.$t("\u8BF7\u9009\u62E9\u7C7B\u578B")},{default:u(()=>[e(me,{value:"string"},{default:u(()=>[i(t(l.$t("\u5B57\u7B26\u4E32")),1)]),_:1}),e(me,{value:"encrypted"},{default:u(()=>[i(t(l.$t("\u52A0\u5BC6")),1)]),_:1}),e(me,{value:"int"},{default:u(()=>[i(t(l.$t("\u6574\u6570")),1)]),_:1}),e(me,{value:"float"},{default:u(()=>[i(t(l.$t("\u6D6E\u70B9\u6570")),1)]),_:1}),e(me,{value:"bool"},{default:u(()=>[i(t(l.$t("\u5E03\u5C14\u503C")),1)]),_:1}),e(me,{value:"ref"},{default:u(()=>[i(t(l.$t("\u5F15\u7528")),1)]),_:1}),e(me,{value:"object"},{default:u(()=>[i(t(l.$t("\u5BF9\u8C61")),1)]),_:1}),e(me,{value:"array"},{default:u(()=>[i(t(l.$t("\u6570\u7EC4")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(Ou,{field:"value",label:l.$t("\u521D\u59CB\u503C")},{default:u(()=>[r.type==="string"?(n(),R(Ze,{key:0,modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=s=>r.value=s),placeholder:l.$t("\u8BF7\u8F93\u5165\u5B57\u7B26\u4E32\u503C")},null,8,["modelValue","placeholder"])):r.type==="int"?(n(),R(pu,{key:1,modelValue:T.value,"onUpdate:modelValue":a[4]||(a[4]=s=>T.value=s),placeholder:l.$t("\u8BF7\u8F93\u5165\u6574\u6570\u503C"),precision:0},null,8,["modelValue","placeholder"])):r.type==="float"?(n(),R(pu,{key:2,modelValue:W.value,"onUpdate:modelValue":a[5]||(a[5]=s=>W.value=s),placeholder:l.$t("\u8BF7\u8F93\u5165\u6D6E\u70B9\u6570\u503C")},null,8,["modelValue","placeholder"])):r.type==="bool"?(n(),R(tl,{key:3,"model-value":r.value==="true","onUpdate:modelValue":a[6]||(a[6]=s=>r.value=String(s))},null,8,["model-value"])):r.type==="ref"?(n(),y("div",Oa,[f("div",Ua,[e(Xe,{modelValue:N.value,"onUpdate:modelValue":a[7]||(a[7]=s=>N.value=s),placeholder:l.$t("\u9009\u62E9\u914D\u7F6E\u952E"),"allow-search":"",style:{flex:"1","margin-right":"8px"}},{default:u(()=>[(n(!0),y(ne,null,ye(ue.value,s=>(n(),R(me,{key:s,value:s},{default:u(()=>[i(t(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder"]),e(Xe,{modelValue:X.value,"onUpdate:modelValue":a[8]||(a[8]=s=>X.value=s),placeholder:l.$t("\u9009\u62E9\u5C5E\u6027\u8DEF\u5F84"),"allow-search":"","allow-create":"",style:{flex:"1"},onChange:re},{default:u(()=>[(n(!0),y(ne,null,ye(M.value,s=>(n(),R(me,{key:s,value:s},{default:u(()=>[i(t(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder"])]),f("div",Ia,[e(_,{type:"outline",size:"small",onClick:De},{default:u(()=>[i(t(l.$t("\u9009\u62E9\u5F15\u7528")),1)]),_:1})]),f("div",Na,[f("span",Ta,t(l.$t("\u5F53\u524D\u5F15\u7528\u8DEF\u5F84"))+"\uFF1A",1),f("span",{class:Oe({"error-text":!ve(r.value)})},t(r.value||l.$t("\u672A\u8BBE\u7F6E")),3),!ve(r.value)&&r.value?(n(),y("span",Ja," ("+t(l.$t("\u683C\u5F0F\u4E0D\u6B63\u786E"))+") ",1)):ie("",!0)]),f("div",Ka,t(l.$t('\u652F\u6301\u5E26\u70B9\u7684\u914D\u7F6E\u952E\u540D(\u5982database.dev)\uFF0C\u683C\u5F0F\u4E3A"\u914D\u7F6E\u952E.\u5C5E\u6027\u8DEF\u5F84"')),1)])):r.type==="object"?(n(),y(ne,{key:5},[e(mu,{modelValue:r.value,"onUpdate:modelValue":a[9]||(a[9]=s=>r.value=s),placeholder:l.$t("\u8BF7\u8F93\u5165JSON\u5BF9\u8C61"),"auto-size":{minRows:3,maxRows:5},status:C(r.value)?void 0:"error"},null,8,["modelValue","placeholder","status"]),f("div",{class:Oe(["field-description",{"error-text":!C(r.value)}])},t(C(r.value)?l.$t("JSON\u683C\u5F0F\u7684\u5BF9\u8C61\u6570\u636E"):l.$t("JSON\u683C\u5F0F\u4E0D\u6B63\u786E")),3),r.value?(n(),y("div",Ra,[e(_,{size:"mini",type:"text",disabled:!C(r.value),onClick:v},{default:u(()=>[i(t(l.$t("\u683C\u5F0F\u5316")),1)]),_:1},8,["disabled"])])):ie("",!0)],64)):r.type==="array"?(n(),y(ne,{key:6},[e(mu,{modelValue:r.value,"onUpdate:modelValue":a[10]||(a[10]=s=>r.value=s),placeholder:l.$t("\u8BF7\u8F93\u5165JSON\u6570\u7EC4"),"auto-size":{minRows:3,maxRows:5},status:C(r.value)?void 0:"error"},null,8,["modelValue","placeholder","status"]),f("div",{class:Oe(["field-description",{"error-text":!C(r.value)}])},t(C(r.value)?l.$t("JSON\u683C\u5F0F\u7684\u6570\u7EC4\u6570\u636E"):l.$t("JSON\u683C\u5F0F\u4E0D\u6B63\u786E")),3),r.value?(n(),y("div",Pa,[e(_,{size:"mini",type:"text",disabled:!C(r.value),onClick:v},{default:u(()=>[i(t(l.$t("\u683C\u5F0F\u5316")),1)]),_:1},8,["disabled"])])):ie("",!0)],64)):ie("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),e(yu,{visible:Be.value,"onUpdate:visible":a[17]||(a[17]=s=>Be.value=s),title:l.$t("\u6279\u91CF\u9009\u62E9\u5C5E\u6027\u8DEF\u5F84"),"mask-closable":!1,"esc-to-close":!1,"footer-before":!0,class:"config-editor-modal batch-select-modal",onBeforeOk:uu,onCancel:lu},{default:u(()=>[f("div",za,[f("div",La,[e(Uu,{modelValue:Ce.value,"onUpdate:modelValue":a[12]||(a[12]=s=>Ce.value=s),type:"button"},{default:u(()=>[e(tu,{value:"all"},{default:u(()=>[i(t(l.$t("\u6240\u6709\u914D\u7F6E")),1)]),_:1}),_e.value?(n(),R(tu,{key:0,value:_e.value},{default:u(()=>[i(t(_e.value),1)]),_:1},8,["value"])):ie("",!0)]),_:1},8,["modelValue"]),Ce.value!=="all"?(n(),y("div",Ma,[e(Ze,{modelValue:Ue.value,"onUpdate:modelValue":a[13]||(a[13]=s=>Ue.value=s),placeholder:l.$t("\u7B5B\u9009\u5C5E\u6027\u8DEF\u5F84"),"allow-clear":""},{prefix:u(()=>[e(b(nl))]),_:1},8,["modelValue","placeholder"])])):ie("",!0)]),Ce.value==="all"?(n(),y("div",xa,[f("div",qa,[i(t(l.$t("\u70B9\u51FB\u914D\u7F6E\u9879\u5C55\u5F00\uFF0C\u53EF\u9009\u62E9\u5C5E\u6027\u8DEF\u5F84"))+" ",1),e(Z,{class:"tree-actions"},{default:u(()=>[e(_,{type:"text",size:"mini",onClick:a[14]||(a[14]=s=>j.value=["all"])},{default:u(()=>[i(t(l.$t("\u5168\u90E8\u6298\u53E0")),1)]),_:1}),e(_,{type:"text",size:"mini",onClick:el},{default:u(()=>[i(t(l.$t("\u5168\u90E8\u5C55\u5F00")),1)]),_:1})]),_:1})]),e(al,{data:Ee.value,"expanded-keys":j.value,"checked-keys":H.value,selectable:!0,checkable:Ae,class:"ref-tree",expandable:!0,"auto-expand-parent":!0,onCheck:nu,onSelect:Le,onExpand:ul},null,8,["data","expanded-keys","checked-keys"])])):(n(),y("div",Ha,[f("div",Wa,[e(_,{type:"text",size:"small",onClick:Du},{default:u(()=>[i(t(l.$t("\u5168\u9009")),1)]),_:1}),e(_,{type:"text",size:"small",onClick:Ge},{default:u(()=>[i(t(l.$t("\u53D6\u6D88\u5168\u9009")),1)]),_:1})]),e(Nl,{modelValue:Fe.value,"onUpdate:modelValue":a[15]||(a[15]=s=>Fe.value=s)},{default:u(()=>[(n(!0),y(ne,null,ye(Je.value,s=>(n(),y("div",{key:s,class:"path-item"},[e(Il,{value:s},{default:u(()=>[i(t(s),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])])),f("div",Ga,[e(Ze,{modelValue:K.value,"onUpdate:modelValue":a[16]||(a[16]=s=>K.value=s),placeholder:l.$t("\u914D\u7F6E\u9879\u540D\u79F0\u524D\u7F00 (\u53EF\u9009)")},{prepend:u(()=>[i(t(l.$t("\u524D\u7F00")),1)]),_:1},8,["modelValue","placeholder"]),f("div",Za,t(l.$t('\u5982\u8BBE\u7F6E\u524D\u7F00 "api_"\uFF0C\u5C06\u751F\u6210\u5982 "api_user_profile" \u5F62\u5F0F\u7684\u914D\u7F6E\u9879\u540D\u79F0')),1)]),f("div",Xa,[f("div",Ya,[i(t(l.$t("\u9884\u89C8"))+" ",1),f("span",Qa,t(l.$t("\u5DF2\u9009\u62E9"))+" "+t(Me())+" "+t(l.$t("\u9879")),1)]),Me()>0?(n(),y("div",eo,[f("div",uo,[f("span",lo,t(l.$t("\u5B57\u6BB5\u540D\u79F0")),1),f("span",to,t(l.$t("\u5F15\u7528\u8DEF\u5F84")),1)]),f("div",ao,[Ce.value==="all"?(n(!0),y(ne,{key:0},ye(H.value,s=>(n(),y("div",{key:s,class:"preview-item"},[Se(s)?(n(),y(ne,{key:0},[f("span",oo,t($e(s)),1),f("span",no,t(s),1)],64)):ie("",!0)]))),128)):(n(!0),y(ne,{key:1},ye(Fe.value,s=>(n(),y("div",{key:s,class:"preview-item"},[f("span",so,t(Ke(_e.value,s)),1),f("span",io,t(`${_e.value}.${s}`),1)]))),128))])])):(n(),y("div",ro,t(l.$t("\u672A\u9009\u62E9\u4EFB\u4F55\u5C5E\u6027\u8DEF\u5F84")),1))])])]),_:1},8,["visible","title"]),e(yu,{visible:oe.value,"onUpdate:visible":a[22]||(a[22]=s=>oe.value=s),title:l.$t("\u9009\u62E9\u5F15\u7528\u8DEF\u5F84"),"mask-closable":!1,"esc-to-close":!1,"footer-before":!0,class:"config-editor-modal field-ref-select-modal",onBeforeOk:qe,onCancel:su},{default:u(()=>[f("div",co,[f("div",vo,[e(Uu,{modelValue:h.value,"onUpdate:modelValue":a[18]||(a[18]=s=>h.value=s),type:"button"},{default:u(()=>[e(tu,{value:"all"},{default:u(()=>[i(t(l.$t("\u6240\u6709\u914D\u7F6E")),1)]),_:1}),o.value?(n(),R(tu,{key:0,value:o.value},{default:u(()=>[i(t(o.value),1)]),_:1},8,["value"])):ie("",!0)]),_:1},8,["modelValue"]),h.value!=="all"?(n(),y("div",fo,[e(Ze,{modelValue:U.value,"onUpdate:modelValue":a[19]||(a[19]=s=>U.value=s),placeholder:l.$t("\u7B5B\u9009\u5C5E\u6027\u8DEF\u5F84"),"allow-clear":""},{prefix:u(()=>[e(b(nl))]),_:1},8,["modelValue","placeholder"])])):ie("",!0)]),h.value==="all"?(n(),y("div",po,[f("div",mo,[i(t(l.$t("\u70B9\u51FB\u914D\u7F6E\u9879\u5C55\u5F00\uFF0C\u53EF\u9009\u62E9\u5C5E\u6027\u8DEF\u5F84"))+" ",1),e(Z,{class:"tree-actions"},{default:u(()=>[e(_,{type:"text",size:"mini",onClick:a[20]||(a[20]=s=>j.value=["all"])},{default:u(()=>[i(t(l.$t("\u5168\u90E8\u6298\u53E0")),1)]),_:1}),e(_,{type:"text",size:"mini",onClick:el},{default:u(()=>[i(t(l.$t("\u5168\u90E8\u5C55\u5F00")),1)]),_:1})]),_:1})]),e(al,{data:Ee.value,"expanded-keys":j.value,"selected-keys":D.value,class:"ref-tree",expandable:!0,"auto-expand-parent":!0,onSelect:ke,onExpand:ul},null,8,["data","expanded-keys","selected-keys"])])):(n(),y("div",yo,[e(Uu,{modelValue:O.value,"onUpdate:modelValue":a[21]||(a[21]=s=>O.value=s),direction:"vertical"},{default:u(()=>[(n(!0),y(ne,null,ye(be.value,s=>(n(),y("div",{key:s,class:"path-item"},[e(tu,{value:s},{default:u(()=>[i(t(s),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])])),f("div",Fo,[f("div",Eo,t(l.$t("\u9884\u89C8")),1),f("div",_o,[D.value.length>0&&h.value==="all"?(n(),y("div",go,t(D.value[0]),1)):O.value?(n(),y("div",ho,t(`${o.value}.${O.value}`),1)):(n(),y("div",Co,t(l.$t("\u672A\u9009\u62E9\u5F15\u7528\u8DEF\u5F84")),1))])])])]),_:1},8,["visible","title"]),e(Ut,{visible:iu.value,title:B.value,value:Hu.value,"field-key":bl.value,mode:Bl.value,"onUpdate:visible":a[23]||(a[23]=s=>iu.value=s),"onUpdate:value":a[24]||(a[24]=s=>Hu.value=s),onApply:$l},null,8,["visible","title","value","field-key","mode"]),e(fa,{visible:Au.value,title:Gu.value,value:wu.value,"field-key":Zu.value,mode:Xu.value,"onUpdate:visible":a[25]||(a[25]=s=>Au.value=s),"onUpdate:value":a[26]||(a[26]=s=>wu.value=s),onApply:kl},null,8,["visible","title","value","field-key","mode"]),e(yu,{visible:ju.value,"onUpdate:visible":a[27]||(a[27]=s=>ju.value=s),title:l.$t("JSON\u914D\u7F6E\u9884\u89C8"),"mask-closable":!0,"esc-to-close":!0,footer:!1,class:"config-editor-modal json-preview-modal"},{default:u(()=>[f("div",Do,[ru.value?(n(),R(g,{key:0,type:"info",content:l.$t("\u6B63\u5728\u52A0\u8F7D\u9884\u89C8\u6570\u636E...")},null,8,["content"])):du.value?(n(),R(g,{key:1,type:"error",content:du.value},null,8,["content"])):(n(),y("div",bo,[f("pre",null,t(vu.value),1)])),f("div",Bo,[e(_,{type:"outline",disabled:!vu.value,onClick:wl},{icon:u(()=>[e(b(Iu))]),default:u(()=>[i(" "+t(l.$t("\u590D\u5236")),1)]),_:1},8,["disabled"])])])]),_:1},8,["visible","title"])])}}});const Ao=Ie(ko,[["__scopeId","data-v-340de8fb"]]),wo={class:"config-history"},Vo={class:"toolbar"},So={key:0,class:"compare-tip"},jo={key:1},Oo={class:"version-header"},Uo={class:"version-header"},Io={class:"diff-key"},No={key:0},To={key:1,class:"missing-value"},Jo={key:0},Ko={key:1,class:"missing-value"},Ro={name:"ConfigHistory"},Po=Ne({...Ro,props:{configKey:{type:String,required:!0},env:{type:String,default:"dev"}},emits:["refresh"],setup(ee,{emit:de}){const c=ee,S=de,w=F(!1),d=F([]),E=F(null),k=F(!1),V=F([]),P=F(!1),r=[{title:"\u7248\u672C",dataIndex:"mod_revision",slotName:"version",width:100},{title:"\u73AF\u5883",dataIndex:"metadata.environment",slotName:"environment",width:120},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at",slotName:"updated_at",width:180},{title:"\u64CD\u4F5C",slotName:"operation",width:150,fixed:"right"}],T={type:"checkbox",showCheckedAll:!1,onSelect:(m,G,z)=>z.length>2?(A.warning("\u6700\u591A\u53EA\u80FD\u9009\u62E9\u4E24\u4E2A\u7248\u672C\u8FDB\u884C\u5BF9\u6BD4"),!1):!0,onChange:(m,G)=>{V.value=G}},W=ae(()=>{var m;return E.value?[{label:"\u7248\u672C\u53F7",value:`v${E.value.mod_revision}`},{label:"\u73AF\u5883",value:((m=E.value.metadata)==null?void 0:m.environment)||"default"},{label:"\u521B\u5EFA\u65F6\u95F4",value:new Date(E.value.create_time).toLocaleString()},{label:"\u66F4\u65B0\u65F6\u95F4",value:E.value.updated_at?new Date(E.value.updated_at).toLocaleString():"-"}]:[]}),ue=ae(()=>{if(V.value.length!==2)return[];const m=new Set;return V.value[0].value&&Object.keys(V.value[0].value).forEach(G=>m.add(G)),V.value[1].value&&Object.keys(V.value[1].value).forEach(G=>m.add(G)),Array.from(m)});function x(m,G){return m?Object.prototype.hasOwnProperty.call(m,G):!1}ou(()=>{N()}),he(()=>c.configKey,()=>{N()});async function N(){if(!!c.configKey)try{w.value=!0,d.value=await mt(c.configKey)}catch(m){A.error("\u83B7\u53D6\u5386\u53F2\u7248\u672C\u5931\u8D25"),console.error(m)}finally{w.value=!1}}function X(m){E.value=m,k.value=!0}function M(m){Pe.confirm({title:"\u56DE\u6EDA\u786E\u8BA4",content:`\u786E\u5B9A\u8981\u56DE\u6EDA\u5230\u7248\u672C v${m.mod_revision} \u5417\uFF1F`,okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:async()=>{try{await Cl(m.key,{value:m.value,metadata:m.metadata}),A.success("\u56DE\u6EDA\u6210\u529F"),S("refresh"),N()}catch(G){A.error("\u56DE\u6EDA\u5931\u8D25"),console.error(G)}}})}function re(m){switch(m){case"prod":return"red";case"stag":return"orange";case"test":return"blue";case"dev":return"green";default:return"gray"}}return(m,G)=>{const z=Te,C=ze,p=Cu,v=xu,$=Mu,L=qu,I=_l,Q=hu,se=gl,le=Pe,ve=zu,ce=Lu;return n(),y("div",wo,[f("div",Vo,[e(C,null,{default:u(()=>[e(z,{onClick:N},{icon:u(()=>[e(b(Nu))]),default:u(()=>[i(" "+t(m.$t("\u5237\u65B0")),1)]),_:1})]),_:1})]),e(L,{loading:w.value},{default:u(()=>[d.value.length===0?(n(),R(p,{key:0,description:m.$t("\u6682\u65E0\u5386\u53F2\u8BB0\u5F55")},null,8,["description"])):(n(),R($,{key:1,"row-key":"mod_revision",columns:r,data:d.value,pagination:{pageSize:10},bordered:!1,stripe:"","row-selection":T,"indent-size":0},{version:u(({record:J})=>[e(v,null,{default:u(()=>[i("v"+t(J.mod_revision),1)]),_:2},1024)]),environment:u(({record:J})=>{var pe;return[e(v,{color:re((pe=J.metadata)==null?void 0:pe.environment)},{default:u(()=>{var we;return[i(t(((we=J.metadata)==null?void 0:we.environment)||"default"),1)]}),_:2},1032,["color"])]}),updated_at:u(({record:J})=>[i(t(new Date(J.updated_at).toLocaleString()),1)]),operation:u(({record:J})=>[e(C,null,{default:u(()=>[e(z,{size:"mini",onClick:pe=>X(J)},{default:u(()=>[i(t(m.$t("\u67E5\u770B")),1)]),_:2},1032,["onClick"]),e(z,{size:"mini",status:"warning",onClick:pe=>M(J)},{default:u(()=>[i(t(m.$t("\u56DE\u6EDA")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data"]))]),_:1},8,["loading"]),e(le,{visible:k.value,"onUpdate:visible":G[0]||(G[0]=J=>k.value=J),title:m.$t("\u7248\u672C\u8BE6\u60C5"),footer:!1,"mask-closable":!0},{default:u(()=>[e(I,{column:1,"label-style":{"font-weight":"bold"},data:W.value,bordered:"",size:"large"},null,8,["data"]),E.value?(n(),y(ne,{key:0},[e(Q,null,{default:u(()=>[i(t(m.$t("\u914D\u7F6E\u503C")),1)]),_:1}),(n(!0),y(ne,null,ye(E.value.value,(J,pe)=>(n(),R(se,{key:pe,class:"version-value-card"},{title:u(()=>[i(t(pe),1)]),extra:u(()=>[e(v,null,{default:u(()=>[i(t(J.type),1)]),_:2},1024)]),default:u(()=>[f("div",null,t(J.value),1)]),_:2},1024))),128))],64)):ie("",!0)]),_:1},8,["visible","title"]),e(le,{visible:P.value,"onUpdate:visible":G[1]||(G[1]=J=>P.value=J),title:m.$t("\u7248\u672C\u5BF9\u6BD4"),footer:!1,"mask-closable":!0,style:{width:"720px"}},{default:u(()=>[V.value.length!==2?(n(),y("div",So,t(m.$t("\u8BF7\u9009\u62E9\u4E24\u4E2A\u7248\u672C\u8FDB\u884C\u5BF9\u6BD4")),1)):(n(),y("div",jo,[e(ce,{style:{"margin-bottom":"16px"}},{default:u(()=>[e(ve,{span:12},{default:u(()=>[f("div",Oo,[i(t(m.$t("\u7248\u672C"))+": v"+t(V.value[0].mod_revision)+" ",1),e(v,null,{default:u(()=>{var J;return[i(t(((J=V.value[0].metadata)==null?void 0:J.environment)||"default"),1)]}),_:1})])]),_:1}),e(ve,{span:12},{default:u(()=>[f("div",Uo,[i(t(m.$t("\u7248\u672C"))+": v"+t(V.value[1].mod_revision)+" ",1),e(v,null,{default:u(()=>{var J;return[i(t(((J=V.value[1].metadata)==null?void 0:J.environment)||"default"),1)]}),_:1})])]),_:1})]),_:1}),e(Q,{style:{margin:"8px 0"}}),(n(!0),y(ne,null,ye(ue.value,J=>(n(),y("div",{key:J,class:"diff-item"},[e(ce,null,{default:u(()=>[e(ve,{span:24},{default:u(()=>[f("div",Io,t(J),1)]),_:2},1024)]),_:2},1024),e(ce,null,{default:u(()=>[e(ve,{span:12,class:"diff-value"},{default:u(()=>[x(V.value[0].value,J)?(n(),y("div",No,[e(v,null,{default:u(()=>[i(t(V.value[0].value[J].type),1)]),_:2},1024),i(" "+t(V.value[0].value[J].value),1)])):(n(),y("div",To,t(m.$t("\u65E0\u6B64\u914D\u7F6E")),1))]),_:2},1024),e(ve,{span:12,class:"diff-value"},{default:u(()=>[x(V.value[1].value,J)?(n(),y("div",Jo,[e(v,null,{default:u(()=>[i(t(V.value[1].value[J].type),1)]),_:2},1024),i(" "+t(V.value[1].value[J].value),1)])):(n(),y("div",Ko,t(m.$t("\u65E0\u6B64\u914D\u7F6E")),1))]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1},8,["visible","title"])])}}});const zo=Ie(Po,[["__scopeId","data-v-1aaedc77"]]),Lo={class:"env-compare"},Mo={class:"toolbar"},xo={key:1},qo={class:"env-status"},Ho={class:"env-header"},Wo={class:"env-header"},Go={key:2},Zo={class:"diff-summary"},Xo={class:"table-container"},Yo={class:"value-cell"},Qo={class:"value-cell"},en={class:"action-buttons",style:{"margin-top":"16px"}},un={name:"ConfigEnvCompare"},ln=Ne({...un,props:{configKey:{type:String,required:!0}},emits:["refresh"],setup(ee,{emit:de}){const c=ee,S=de,w=["dev","test","stag","prod","default"],d=F(!1),E=F(!1),k=F("dev"),V=F("prod"),P=F({}),r=ae(()=>{if(console.log("\u8BA1\u7B97sourceConfig\uFF0C\u5F53\u524D\u73AF\u5883:",k.value),console.log("\u53EF\u7528\u73AF\u5883\u914D\u7F6E:",Object.keys(P.value)),P.value[k.value])return P.value[k.value];if(k.value!=="default"&&P.value.default)return console.log("\u4F7F\u7528default\u73AF\u5883\u66FF\u4EE3",k.value),P.value.default}),T=ae(()=>{if(console.log("\u8BA1\u7B97targetConfig\uFF0C\u5F53\u524D\u73AF\u5883:",V.value),P.value[V.value])return P.value[V.value];if(V.value!=="default"&&P.value.default)return console.log("\u4F7F\u7528default\u73AF\u5883\u66FF\u4EE3",V.value),P.value.default}),W=ae(()=>E.value?!r.value||!T.value:!1),ue=ae(()=>{if(!r.value||!T.value)return[];const v=new Set,$=Object.keys(r.value.value||{}),L=Object.keys(T.value.value||{});return $.forEach(I=>v.add(I)),L.forEach(I=>v.add(I)),Array.from(v).filter(I=>{var le,ve,ce,J;const Q=(ve=(le=r.value)==null?void 0:le.value)==null?void 0:ve[I],se=(J=(ce=T.value)==null?void 0:ce.value)==null?void 0:J[I];return!Q||!se?!0:Q.type!==se.type||Q.value!==se.value})}),x=ae(()=>{if(!r.value||!T.value)return[];const v=new Set,$=Object.keys(r.value.value||{}),L=Object.keys(T.value.value||{});return $.forEach(I=>v.add(I)),L.forEach(I=>v.add(I)),Array.from(v).map(I=>{var le,ve,ce,J;const Q=(ve=(le=r.value)==null?void 0:le.value)==null?void 0:ve[I],se=(J=(ce=T.value)==null?void 0:ce.value)==null?void 0:J[I];return{key:I,sourceType:(Q==null?void 0:Q.type)||"",sourceValue:(Q==null?void 0:Q.value)||p("\u4E0D\u5B58\u5728"),targetType:(se==null?void 0:se.type)||"",targetValue:(se==null?void 0:se.value)||p("\u4E0D\u5B58\u5728"),isDifferent:!Q||!se||Q.type!==se.type||Q.value!==se.value}}).sort((I,Q)=>I.isDifferent&&!Q.isDifferent?-1:!I.isDifferent&&Q.isDifferent?1:I.key.localeCompare(Q.key))});ou(()=>{N()}),he(()=>c.configKey,(v,$)=>{v&&v!==$&&(console.log("\u914D\u7F6E\u952E\u53D8\u5316\uFF0C\u4ECE",$,"\u5230",v,"\uFF0C\u5237\u65B0\u73AF\u5883\u914D\u7F6E"),N(),E.value=!1)},{immediate:!0});async function N(){if(!!c.configKey)try{d.value=!0,console.log("\u5F00\u59CB\u83B7\u53D6\u73AF\u5883\u914D\u7F6E\uFF0C\u952E:",c.configKey);const v=await yt(c.configKey);if(console.log("\u73AF\u5883\u914D\u7F6E\u54CD\u5E94:",v),!v){console.error("\u73AF\u5883\u914D\u7F6E\u8FD4\u56DE\u4E3A\u7A7A"),P.value={};return}console.log("\u73AF\u5883\u914D\u7F6E\u6570\u636E\u7C7B\u578B:",typeof v),console.log("\u73AF\u5883\u914D\u7F6E\u952E\u5217\u8868:",Object.keys(v)),P.value=v,console.log("\u8BBE\u7F6E\u540E\u7684\u73AF\u5883\u914D\u7F6E:",P.value)}catch(v){A.error("\u83B7\u53D6\u73AF\u5883\u914D\u7F6E\u5931\u8D25"),console.error("\u83B7\u53D6\u73AF\u5883\u914D\u7F6E\u5F02\u5E38:",v),P.value={}}finally{d.value=!1}}function X(){if(k.value===V.value){A.warning("\u8BF7\u9009\u62E9\u4E0D\u540C\u7684\u73AF\u5883\u8FDB\u884C\u5BF9\u6BD4");return}E.value=!0}async function M(){if(!r.value){A.error("\u6E90\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E");return}try{d.value=!0;const v={...r.value.metadata||{}};v.environment=V.value,await Ye(c.configKey,V.value,{value:r.value.value||{},metadata:v}),A.success("\u590D\u5236\u5230\u76EE\u6807\u73AF\u5883\u6210\u529F"),S("refresh"),await N()}catch(v){A.error("\u590D\u5236\u5931\u8D25"),console.error("\u590D\u5236\u5230\u76EE\u6807\u73AF\u5883\u5931\u8D25:",v)}finally{d.value=!1}}async function re(){if(!T.value){A.error("\u76EE\u6807\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E");return}try{d.value=!0;const v={...T.value.metadata||{}};v.environment=k.value,await Ye(c.configKey,k.value,{value:T.value.value||{},metadata:v}),A.success("\u590D\u5236\u5230\u6E90\u73AF\u5883\u6210\u529F"),S("refresh"),await N()}catch(v){A.error("\u590D\u5236\u5931\u8D25"),console.error("\u590D\u5236\u5230\u6E90\u73AF\u5883\u5931\u8D25:",v)}finally{d.value=!1}}async function m(v){if(!r.value||!r.value.value||!r.value.value[v]){A.error("\u6E90\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E\u9879");return}if(!T.value){A.error("\u76EE\u6807\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E\uFF0C\u8BF7\u5148\u521B\u5EFA");return}try{d.value=!0;const $={...T.value.value||{}};$[v]={...r.value.value[v]};const L={...T.value.metadata||{}};await Ye(c.configKey,V.value,{value:$,metadata:L}),A.success("\u590D\u5236\u914D\u7F6E\u9879\u5230\u76EE\u6807\u73AF\u5883\u6210\u529F"),S("refresh"),await N()}catch($){A.error("\u590D\u5236\u5931\u8D25"),console.error("\u590D\u5236\u914D\u7F6E\u9879\u5230\u76EE\u6807\u73AF\u5883\u5931\u8D25:",$)}finally{d.value=!1}}async function G(v){if(!T.value||!T.value.value||!T.value.value[v]){A.error("\u76EE\u6807\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E\u9879");return}if(!r.value){A.error("\u6E90\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E\uFF0C\u8BF7\u5148\u521B\u5EFA");return}try{d.value=!0;const $={...r.value.value||{}};$[v]={...T.value.value[v]};const L={...r.value.metadata||{}};await Ye(c.configKey,k.value,{value:$,metadata:L}),A.success("\u590D\u5236\u914D\u7F6E\u9879\u5230\u6E90\u73AF\u5883\u6210\u529F"),S("refresh"),await N()}catch($){A.error("\u590D\u5236\u5931\u8D25"),console.error("\u590D\u5236\u914D\u7F6E\u9879\u5230\u6E90\u73AF\u5883\u5931\u8D25:",$)}finally{d.value=!1}}async function z(){if(!r.value){A.error("\u6E90\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E");return}Pe.confirm({title:"\u786E\u8BA4\u540C\u6B65",content:`\u786E\u5B9A\u8981\u5C06\u6240\u6709\u914D\u7F6E\u4ECE ${k.value} \u540C\u6B65\u5230 ${V.value} \u5417\uFF1F\u8FD9\u5C06\u8986\u76D6\u76EE\u6807\u73AF\u5883\u7684\u6240\u6709\u914D\u7F6E\u3002`,okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:async()=>{try{if(d.value=!0,!r.value)throw new Error("\u6E90\u73AF\u5883\u914D\u7F6E\u4E0D\u5B58\u5728");const v={...r.value.metadata||{}};v.environment=V.value,await Ye(c.configKey,V.value,{value:r.value.value||{},metadata:v}),A.success("\u540C\u6B65\u5230\u76EE\u6807\u73AF\u5883\u6210\u529F"),S("refresh"),await N()}catch(v){A.error("\u540C\u6B65\u5931\u8D25"),console.error("\u540C\u6B65\u5230\u76EE\u6807\u73AF\u5883\u5931\u8D25:",v)}finally{d.value=!1}}})}async function C(){if(!T.value){A.error("\u76EE\u6807\u73AF\u5883\u4E0D\u5B58\u5728\u8BE5\u914D\u7F6E");return}Pe.confirm({title:"\u786E\u8BA4\u540C\u6B65",content:`\u786E\u5B9A\u8981\u5C06\u6240\u6709\u914D\u7F6E\u4ECE ${V.value} \u540C\u6B65\u5230 ${k.value} \u5417\uFF1F\u8FD9\u5C06\u8986\u76D6\u6E90\u73AF\u5883\u7684\u6240\u6709\u914D\u7F6E\u3002`,okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:async()=>{try{if(d.value=!0,!T.value)throw new Error("\u76EE\u6807\u73AF\u5883\u914D\u7F6E\u4E0D\u5B58\u5728");const v={...T.value.metadata||{}};v.environment=k.value,await Ye(c.configKey,k.value,{value:T.value.value||{},metadata:v}),A.success("\u540C\u6B65\u5230\u6E90\u73AF\u5883\u6210\u529F"),S("refresh"),await N()}catch(v){A.error("\u540C\u6B65\u5931\u8D25"),console.error("\u540C\u6B65\u5230\u6E90\u73AF\u5883\u5931\u8D25:",v)}finally{d.value=!1}}})}function p(v,$){return $?v.replace(/\{(\d+)\}/g,(L,I)=>String($[Number(I)])):v}return(v,$)=>{const L=Te,I=ze,Q=_u,se=gu,le=hu,ve=Cu,ce=Pu,J=xu,pe=zu,we=Lu,Ve=pl,Be=Eu,_e=Mu,Ce=qu;return n(),y("div",Lo,[f("div",Mo,[e(I,null,{default:u(()=>[e(L,{type:"primary",onClick:X},{icon:u(()=>[e(b(zl))]),default:u(()=>[i(" "+t(p("\u5F00\u59CB\u5BF9\u6BD4")),1)]),_:1}),e(L,{onClick:N},{icon:u(()=>[e(b(Nu))]),default:u(()=>[i(" "+t(p("\u5237\u65B0\u73AF\u5883\u914D\u7F6E")),1)]),_:1})]),_:1}),e(I,null,{default:u(()=>[e(se,{modelValue:k.value,"onUpdate:modelValue":$[0]||($[0]=H=>k.value=H),placeholder:p("\u6E90\u73AF\u5883"),style:{width:"120px"}},{default:u(()=>[(n(),y(ne,null,ye(w,H=>e(Q,{key:H,value:H},{default:u(()=>[i(t(H),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue","placeholder"]),e(b(Ll)),e(se,{modelValue:V.value,"onUpdate:modelValue":$[1]||($[1]=H=>V.value=H),placeholder:p("\u76EE\u6807\u73AF\u5883"),style:{width:"120px"}},{default:u(()=>[(n(),y(ne,null,ye(w,H=>e(Q,{key:H,value:H},{default:u(()=>[i(t(H),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1})]),e(le),e(Ce,{loading:d.value},{default:u(()=>[E.value?W.value?(n(),y("div",xo,[e(ce,{type:"warning",content:p("\u81F3\u5C11\u6709\u4E00\u4E2A\u73AF\u5883\u6CA1\u6709\u8BE5\u914D\u7F6E\u9879")},null,8,["content"]),f("div",qo,[e(we,null,{default:u(()=>[e(pe,{span:12},{default:u(()=>[f("div",Ho,[i(t(k.value)+" ",1),e(J,{color:r.value?"green":"red"},{default:u(()=>[i(t(r.value?p("\u5B58\u5728"):p("\u4E0D\u5B58\u5728")),1)]),_:1},8,["color"])])]),_:1}),e(pe,{span:12},{default:u(()=>[f("div",Wo,[i(t(V.value)+" ",1),e(J,{color:T.value?"green":"red"},{default:u(()=>[i(t(T.value?p("\u5B58\u5728"):p("\u4E0D\u5B58\u5728")),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),e(I,{style:{"margin-top":"16px"}},{default:u(()=>[r.value&&!T.value?(n(),R(L,{key:0,type:"primary",status:"success",onClick:M},{default:u(()=>[i(t(p("\u590D\u5236\u5230\u76EE\u6807\u73AF\u5883")),1)]),_:1})):ie("",!0),!r.value&&T.value?(n(),R(L,{key:1,type:"primary",status:"success",onClick:re},{default:u(()=>[i(t(p("\u590D\u5236\u5230\u6E90\u73AF\u5883")),1)]),_:1})):ie("",!0)]),_:1})])):(n(),y("div",Go,[f("div",Zo,[ue.value.length===0?(n(),R(ce,{key:0,type:"success",content:p("\u4E24\u4E2A\u73AF\u5883\u914D\u7F6E\u5B8C\u5168\u76F8\u540C"),style:{"margin-bottom":"16px"}},null,8,["content"])):(n(),R(ce,{key:1,type:"info",content:p("\u53D1\u73B0 {0} \u4E2A\u5DEE\u5F02",[ue.value.length]),style:{"margin-bottom":"16px"}},null,8,["content"]))]),f("div",Xo,[e(_e,{data:x.value,bordered:!0,pagination:!1,"row-key":"key"},{columns:u(()=>[e(Ve,{title:"\u914D\u7F6E\u9879","data-index":"key"}),e(Ve,{title:k.value,"data-index":"sourceValue"},{cell:u(({record:H})=>[f("div",Yo,[H.sourceType?(n(),R(J,{key:0},{default:u(()=>[i(t(H.sourceType),1)]),_:2},1024)):ie("",!0),f("span",null,t(H.sourceValue),1)])]),_:1},8,["title"]),e(Ve,{title:V.value,"data-index":"targetValue"},{cell:u(({record:H})=>[f("div",Qo,[H.targetType?(n(),R(J,{key:0},{default:u(()=>[i(t(H.targetType),1)]),_:2},1024)):ie("",!0),f("span",null,t(H.targetValue),1)])]),_:1},8,["title"]),e(Ve,{title:"\u64CD\u4F5C",fixed:"right",width:150},{cell:u(({record:H})=>[e(I,null,{default:u(()=>[e(Be,{content:p("\u590D\u5236\u5230\u76EE\u6807\u73AF\u5883")},{default:u(()=>[e(L,{size:"mini",onClick:Fe=>m(H.key)},{default:u(()=>$[2]||($[2]=[i(" \u2192 ")])),_:2},1032,["onClick"])]),_:2},1032,["content"]),e(Be,{content:p("\u590D\u5236\u5230\u6E90\u73AF\u5883")},{default:u(()=>[e(L,{size:"mini",onClick:Fe=>G(H.key)},{default:u(()=>$[3]||($[3]=[i(" \u2190 ")])),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),f("div",en,[e(I,null,{default:u(()=>[e(L,{type:"primary",status:"success",onClick:z},{default:u(()=>[i(t(p("\u5168\u90E8\u540C\u6B65\u5230\u76EE\u6807\u73AF\u5883")),1)]),_:1}),e(L,{type:"primary",status:"warning",onClick:C},{default:u(()=>[i(t(p("\u5168\u90E8\u540C\u6B65\u5230\u6E90\u73AF\u5883")),1)]),_:1})]),_:1})])])):(n(),R(ve,{key:0,description:p("\u8BF7\u9009\u62E9\u73AF\u5883\u8FDB\u884C\u5BF9\u6BD4")},null,8,["description"]))]),_:1},8,["loading"])])}}});const tn=Ie(ln,[["__scopeId","data-v-de7902c2"]]),an={class:"config-center-container"},on={class:"config-layout"},nn={class:"config-sidebar"},sn={class:"sidebar-header"},rn={class:"sidebar-title"},dn={class:"env-filter-bar"},cn={class:"config-content"},vn={class:"content-header"},fn={class:"content-title"},pn={key:1,class:"config-detail-container"},mn={class:"info-card"},yn={class:"export-hint"},Fn={class:"import-hint"},En={class:"import-result-container"},_n={key:0},gn={key:1},hn={key:0,class:"skipped-list-container"},Cn=Ne({__name:"index",setup(ee){const de=["dev","test","stag","prod"],c=F(!1),S=F(!1),w=F(""),d=F([]),E=F(""),k=F("dev"),V=F(null),P=F(!1),r=F(!1),T=F(!1),W=F(!1),ue=F(),x=F(),N=F(),X=F("all"),M=F(["root"]),re=F([]),m=Qe({key:"",environment:"",description:"",initialConfigKey:"",initialConfigValue:"",initialConfigType:"string"}),G=Qe({password:"",confirmPassword:""}),z=Qe({password:"",file:null,skipExisting:!0,originalSalt:""}),C=ae(()=>{if(!d.value||!d.value.length)return[];const o=[{key:"root",title:"\u6839\u76EE\u5F55",selectable:!1,children:[]}];let h=d.value.filter(D=>D&&D.key);return w.value&&(h=h.filter(D=>{var O;return D.key.includes(w.value)||((O=D.metadata)==null?void 0:O.description)&&D.metadata.description.includes(w.value)})),X.value!=="all"&&(h=h.filter(D=>{var U;return(((U=D.metadata)==null?void 0:U.environment)||"default")===X.value||D.key.endsWith("."+X.value)||D.key.includes("."+X.value+".")})),h.forEach(D=>{var Se;if(!D||!D.key)return;let O=D.key,U=((Se=D.metadata)==null?void 0:Se.environment)||"default";const q=D.key.split(".");if(q.length>1){const Ae=q[q.length-1];de.includes(Ae)?(U=Ae,O=q.slice(0,q.length-1).join(".")):q.length>2&&de.includes(q[q.length-2])&&(U=q[q.length-2])}const Ee=O.split(".");let Je=o[0].children,be="";for(let Ae=0;Ae<Ee.length;Ae++){const Le=Ee[Ae];be=be?`${be}.${Le}`:Le;let $e=Je.find(Ke=>Ke.key===be);$e||($e={key:be,title:Le,children:[],selectable:!0},Je.push($e)),Ae===Ee.length-1&&($e.children.some(Me=>Me.configEnv===U)||$e.children.push({key:`${O}:${U}`,title:U==="default"?"\u9ED8\u8BA4":U,isLeaf:!0,configEnv:U,configKey:D.key})),Je=$e.children}}),o}),p=ae(()=>{var h,D;if(!V.value)return[];const o=V.value;return[{label:"\u914D\u7F6E\u952E",value:o.key||""},{label:"\u73AF\u5883",value:((h=o.metadata)==null?void 0:h.environment)||"default"},{label:"\u7248\u672C\u53F7",value:o.version?String(o.version):"-"},{label:"\u66F4\u65B0\u65F6\u95F4",value:o.updated_at?new Date(o.updated_at).toLocaleString():"-"},{label:"\u63CF\u8FF0",value:((D=o.metadata)==null?void 0:D.description)||"-"}]}),v=F(!1),$=Qe({skipped:[]}),L=F(""),I=ae(()=>!$.skipped||!Array.isArray($.skipped)?[]:L.value?$.skipped.filter(o=>o.toLowerCase().includes(L.value.toLowerCase())):$.skipped);ou(()=>{le()});function Q(o){switch(o){case"dev":return"blue";case"test":return"green";case"stag":return"orange";case"prod":return"red";default:return"gray"}}function se(){}async function le(){try{c.value=!0,console.log("\u5F00\u59CB\u83B7\u53D6\u914D\u7F6E\u5217\u8868...");const o=await hl();console.log("\u83B7\u53D6\u914D\u7F6E\u5217\u8868\u7ED3\u679C:",o),Array.isArray(o)?(console.log("\u914D\u7F6E\u5217\u8868\u4E3A\u6570\u7EC4\uFF0C\u957F\u5EA6:",o.length),d.value=o):(console.error("\u914D\u7F6E\u5217\u8868\u4E0D\u662F\u6570\u7EC4:",typeof o),d.value=[])}catch(o){A.error("\u83B7\u53D6\u914D\u7F6E\u5217\u8868\u5931\u8D25"),console.error("\u83B7\u53D6\u914D\u7F6E\u5217\u8868\u5F02\u5E38:",o),d.value=[]}finally{c.value=!1}}function ve(){}async function ce(o,h){const D=h.node;if((D==null?void 0:D.configKey)&&(D==null?void 0:D.configEnv)){E.value=D.configKey,k.value=D.configEnv,await pe();return}D&&D.children&&D.children.length>0&&(M.value.includes(D.key)?M.value=M.value.filter(U=>U!==D.key):M.value=[...M.value,D.key])}function J(o,h){if(!h.node||h.expanded===void 0)return;const D=h.node.key;h.expanded?M.value=[...new Set([...M.value,D])]:M.value=M.value.filter(O=>O!==D)}async function pe(){if(!!E.value)try{S.value=!0,console.log("\u5F00\u59CB\u83B7\u53D6\u914D\u7F6E\u8BE6\u60C5\uFF0C\u952E:",E.value);let o=E.value;const h=E.value.split("."),D=h[h.length-1];D!==k.value&&de.includes(k.value)&&(de.includes(D)?o=h.slice(0,h.length-1).join(".")+"."+k.value:k.value!=="default"&&(o=E.value+"."+k.value)),console.log("\u83B7\u53D6\u914D\u7F6E\u8BE6\u60C5\u7684\u952E:",o);const O=await Ft(o);if(console.log("\u83B7\u53D6\u914D\u7F6E\u8BE6\u60C5\u54CD\u5E94:",O),!O){console.error("\u914D\u7F6E\u8BE6\u60C5\u4E3A\u7A7A"),A.warning(`\u672A\u627E\u5230\u914D\u7F6E\u9879: ${o}`),V.value=null;return}O.value||(console.warn("\u914D\u7F6E\u8BE6\u60C5\u4E2D\u6CA1\u6709value\u5B57\u6BB5:",O),O.value={}),console.log("\u914D\u7F6E\u503C\u7ED3\u6784:",O.value),V.value=O}catch(o){A.error(`\u83B7\u53D6\u914D\u7F6E\u8BE6\u60C5\u5931\u8D25: ${o instanceof Error?o.message:"\u672A\u77E5\u9519\u8BEF"}`),console.error("\u83B7\u53D6\u914D\u7F6E\u8BE6\u60C5\u5F02\u5E38:",o),V.value=null}finally{S.value=!1}}async function we(o){k.value=o,await pe()}function Ve(){P.value=!0}async function Be(){if(!ue.value)return!1;try{await ue.value.validate();let o=m.initialConfigValue;if(m.initialConfigType==="int")o=parseInt(m.initialConfigValue);else if(m.initialConfigType==="float")o=parseFloat(m.initialConfigValue);else if(m.initialConfigType==="bool")o=m.initialConfigValue.toLowerCase()==="true";else if(m.initialConfigType==="object")try{o=JSON.parse(m.initialConfigValue)}catch{return A.error("\u5BF9\u8C61\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u8BF7\u8F93\u5165\u6709\u6548\u7684JSON\u683C\u5F0F"),!1}else if(m.initialConfigType==="array")try{if(o=JSON.parse(m.initialConfigValue),!Array.isArray(o))throw new Error("Not an array")}catch{return A.error("\u6570\u7EC4\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u8BF7\u8F93\u5165\u6709\u6548\u7684JSON\u6570\u7EC4\u683C\u5F0F"),!1}const h={[m.initialConfigKey]:{value:o,type:m.initialConfigType}},D={};if(m.description&&(D.description=m.description),m.environment){let O=m.key;const U=O.split(".");U[U.length-1]!==m.environment&&!O.endsWith("."+m.environment)&&(O=`${O}.${m.environment}`),console.log("\u521B\u5EFA\u914D\u7F6E\uFF0C\u952E:",O,"\u73AF\u5883:",m.environment),await sl({key:O,value:h,metadata:{...D,environment:m.environment}})}else await sl({key:m.key,value:h,metadata:D});return A.success("\u914D\u7F6E\u521B\u5EFA\u6210\u529F"),le(),Fe(),!0}catch(o){return A.error("\u521B\u5EFA\u914D\u7F6E\u5931\u8D25"),console.error(o),!1}}async function _e(){await pe(),A.success("\u914D\u7F6E\u66F4\u65B0\u6210\u529F")}function Ce(){!E.value||(r.value=!0)}async function H(){if(!E.value)return!1;try{return await Et(E.value),A.success("\u914D\u7F6E\u5220\u9664\u6210\u529F"),E.value="",V.value=null,le(),!0}catch(o){return A.error("\u5220\u9664\u914D\u7F6E\u5931\u8D25"),console.error(o),!1}}function Fe(){var o;m.key="",m.environment="",m.description="",m.initialConfigKey="",m.initialConfigValue="",m.initialConfigType="string",(o=ue.value)==null||o.clearValidate()}function Ue(){T.value=!0}function K(){W.value=!0,re.value=[],z.password="",z.file=null,z.originalSalt=""}function j(o){re.value=o,o&&o.length>0?z.file=o[0].file:z.file=null}async function oe(){if(!x.value)return!1;try{await x.value.validate(),S.value=!0;const o=G.password,h=await _t(o);if(!h||!h.data)throw new Error("\u5BFC\u51FA\u6570\u636E\u4E3A\u7A7A");const D=new Blob([h.data],{type:"application/octet-stream"}),O=URL.createObjectURL(D),U=document.createElement("a");U.href=O;const q=new Date,Ee=`config_export_${q.getFullYear()}${(q.getMonth()+1).toString().padStart(2,"0")}${q.getDate().toString().padStart(2,"0")}_${q.getHours().toString().padStart(2,"0")}${q.getMinutes().toString().padStart(2,"0")}.aio`;return U.download=Ee,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(O),G.password="",G.confirmPassword="",A.success("\u914D\u7F6E\u5BFC\u51FA\u6210\u529F"),!0}catch(o){return console.error("\u5BFC\u51FA\u914D\u7F6E\u5931\u8D25:",o),A.error(`\u5BFC\u51FA\u914D\u7F6E\u5931\u8D25: ${o instanceof Error?o.message:"\u672A\u77E5\u9519\u8BEF"}`),!1}finally{S.value=!1}}async function te(){if(!N.value)return!1;try{if(await N.value.validate(),!z.file)return A.error("\u8BF7\u9009\u62E9\u8981\u5BFC\u5165\u7684\u914D\u7F6E\u6587\u4EF6"),!1;S.value=!0;const o=new FileReader,h=await new Promise((O,U)=>{o.onload=q=>{q.target&&typeof q.target.result=="string"?O(q.target.result):U(new Error("\u8BFB\u53D6\u6587\u4EF6\u5931\u8D25"))},o.onerror=q=>U(q),o.readAsText(z.file)}),D=await gt({data:h,password:z.password,skipExisting:z.skipExisting,originalSalt:z.originalSalt});return console.log("\u5BFC\u5165\u914D\u7F6E\u8FD4\u56DE\u7ED3\u679C:",D),z.password="",z.file=null,z.originalSalt="",re.value=[],await le(),D.skipped&&Array.isArray(D.skipped)?(console.log("\u68C0\u6D4B\u5230\u8DF3\u8FC7\u7684\u914D\u7F6E:",D.skipped),$.skipped=D.skipped,v.value=!0,D.skipped.length===0&&A.success("\u914D\u7F6E\u5BFC\u5165\u6210\u529F")):(console.log("\u6CA1\u6709\u8DF3\u8FC7\u7684\u914D\u7F6E\u6216\u8DF3\u8FC7\u914D\u7F6E\u5217\u8868\u4E3A\u7A7A"),$.skipped=[],A.success("\u914D\u7F6E\u5BFC\u5165\u6210\u529F")),!0}catch(o){return console.error("\u5BFC\u5165\u914D\u7F6E\u5931\u8D25:",o),A.error(`\u5BFC\u5165\u914D\u7F6E\u5931\u8D25: ${o instanceof Error?o.message:"\u672A\u77E5\u9519\u8BEF"}`),!1}finally{S.value=!1}}return(o,h)=>{const D=cl("Breadcrumb"),O=Te,U=Eu,q=ze,Ee=fl,Je=hu,be=Ku,Se=Ru,Ae=xu,Le=El,$e=Cu,Ke=qu,Me=gl,Du=_l,Ge=st,bu=it,xe=Ju,De=yl,ke=_u,nu=gu,uu=Fl,qe=Pe,lu=ml,su=Pu,He=rt,Bu=dt,$u=ct,ku=vt,iu=ft;return n(),y("div",an,[e(D,{items:["\u914D\u7F6E\u4E2D\u5FC3","\u914D\u7F6E\u7BA1\u7406"]}),f("div",on,[f("div",nn,[e(Me,{class:"sidebar-card",bordered:!1},{title:u(()=>[f("div",sn,[f("span",rn,t(o.$t("\u914D\u7F6E\u9879\u5217\u8868")),1),e(q,null,{default:u(()=>[e(U,{content:o.$t("\u5BFC\u51FA\u914D\u7F6E")},{default:u(()=>[e(O,{type:"primary",size:"small",onClick:Ue},{icon:u(()=>[e(b(Ml))]),_:1})]),_:1},8,["content"]),e(U,{content:o.$t("\u5BFC\u5165\u914D\u7F6E")},{default:u(()=>[e(O,{type:"primary",status:"warning",size:"small",onClick:K},{icon:u(()=>[e(b(nt))]),_:1})]),_:1},8,["content"]),e(U,{content:o.$t("\u65B0\u5EFA\u914D\u7F6E")},{default:u(()=>[e(O,{type:"primary",size:"small",status:"success",onClick:Ve},{icon:u(()=>[e(b(Re))]),_:1})]),_:1},8,["content"]),e(U,{content:o.$t("\u5237\u65B0\u5217\u8868")},{default:u(()=>[e(O,{size:"small",onClick:le},{icon:u(()=>[e(b(Nu))]),_:1})]),_:1},8,["content"])]),_:1})])]),default:u(()=>[e(Ee,{modelValue:w.value,"onUpdate:modelValue":h[0]||(h[0]=B=>w.value=B),placeholder:o.$t("\u641C\u7D22\u914D\u7F6E\u9879"),class:"search-input","allow-clear":"",onSearch:ve},null,8,["modelValue","placeholder"]),e(Je,{style:{margin:"12px 0"}}),e(Ke,{loading:c.value,class:"full-height"},{default:u(()=>[f("div",dn,[e(Se,{modelValue:X.value,"onUpdate:modelValue":h[1]||(h[1]=B=>X.value=B),type:"button",size:"small",onChange:se},{default:u(()=>[e(be,{value:"all"},{default:u(()=>[i(t(o.$t("\u5168\u90E8")),1)]),_:1}),(n(),y(ne,null,ye(de,B=>e(be,{key:B,value:B},{default:u(()=>[i(t(B),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),C.value.length>0?(n(),R(Le,{key:0,data:C.value,"default-expanded-keys":["root"],"expanded-keys":M.value,class:"config-tree","show-line":!0,draggable:!1,size:"medium",onSelect:ce,onExpand:J},{icon:u(B=>[B.isLeaf?B.configEnv==="dev"?(n(),R(b(au),{key:1,style:{color:"#1890ff"}})):B.configEnv==="test"?(n(),R(b(au),{key:2,style:{color:"#52c41a"}})):B.configEnv==="stag"?(n(),R(b(au),{key:3,style:{color:"#faad14"}})):B.configEnv==="prod"?(n(),R(b(au),{key:4,style:{color:"#f5222d"}})):(n(),R(b(au),{key:5})):(n(),R(b(xl),{key:0}))]),title:u(B=>[f("span",{class:Oe({"selected-node":B.key===E.value})},t(B.title),3),B.configEnv&&B.isLeaf?(n(),R(Ae,{key:0,color:Q(B.configEnv),size:"small",style:{"margin-left":"8px"}},{default:u(()=>[i(t(B.configEnv),1)]),_:2},1032,["color"])):ie("",!0)]),_:1},8,["data","expanded-keys"])):(n(),R($e,{key:1,description:o.$t("\u6682\u65E0\u914D\u7F6E\u9879")},null,8,["description"]))]),_:1},8,["loading"])]),_:1})]),f("div",cn,[e(Me,{class:"content-card",bordered:!1},{title:u(()=>[f("div",vn,[f("span",fn,t(E.value?`${o.$t("\u914D\u7F6E\u8BE6\u60C5")}: ${E.value}`:o.$t("\u914D\u7F6E\u8BE6\u60C5")),1),E.value?(n(),R(q,{key:0},{default:u(()=>[e(Se,{modelValue:k.value,"onUpdate:modelValue":h[2]||(h[2]=B=>k.value=B),type:"button",size:"small",onChange:we},{default:u(()=>[(n(),y(ne,null,ye(de,B=>e(be,{key:B,value:B},{default:u(()=>[i(t(B),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(O,{type:"primary",status:"danger",size:"small",onClick:Ce},{icon:u(()=>[e(b(Tu))]),_:1})]),_:1})):ie("",!0)])]),default:u(()=>[e(Ke,{loading:S.value,class:"full-height"},{default:u(()=>[E.value?(n(),y("div",pn,[e(bu,{"default-active-key":"detail",type:"card-gutter"},{default:u(()=>[e(Ge,{key:"detail",title:o.$t("\u57FA\u672C\u4FE1\u606F")},{default:u(()=>[f("div",mn,[e(Du,{data:p.value,column:{xs:1,sm:2,md:3},"label-style":{"font-weight":"bold"},size:"medium",bordered:"",layout:"inline-horizontal"},null,8,["data"])])]),_:1},8,["title"]),e(Ge,{key:"edit",title:o.$t("\u914D\u7F6E\u503C\u7F16\u8F91")},{default:u(()=>[e(Ao,{"config-item":V.value,env:k.value,onUpdate:_e},null,8,["config-item","env"])]),_:1},8,["title"]),e(Ge,{key:"history",title:o.$t("\u7248\u672C\u5386\u53F2")},{default:u(()=>[e(zo,{"config-key":E.value,env:k.value,onRefresh:pe},null,8,["config-key","env"])]),_:1},8,["title"]),e(Ge,{key:"env-compare",title:o.$t("\u73AF\u5883\u5BF9\u6BD4")},{default:u(()=>[e(tn,{"config-key":E.value,onRefresh:pe},null,8,["config-key"])]),_:1},8,["title"])]),_:1})])):(n(),R($e,{key:0,description:o.$t("\u8BF7\u9009\u62E9\u914D\u7F6E\u9879")},null,8,["description"]))]),_:1},8,["loading"])]),_:1})])]),e(qe,{visible:P.value,"onUpdate:visible":h[9]||(h[9]=B=>P.value=B),title:o.$t("\u65B0\u5EFA\u914D\u7F6E"),onBeforeOk:Be,onCancel:Fe},{default:u(()=>[e(uu,{ref_key:"createFormRef",ref:ue,model:m,"label-align":"left","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:u(()=>[e(De,{field:"key",label:o.$t("\u914D\u7F6E\u952E"),rules:[{required:!0,message:o.$t("\u8BF7\u8F93\u5165\u914D\u7F6E\u952E")}]},{default:u(()=>[e(xe,{modelValue:m.key,"onUpdate:modelValue":h[3]||(h[3]=B=>m.key=B),placeholder:o.$t("\u8BF7\u8F93\u5165\u914D\u7F6E\u952E\uFF0C\u5982 app.database"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(De,{field:"environment",label:o.$t("\u73AF\u5883")},{default:u(()=>[e(nu,{modelValue:m.environment,"onUpdate:modelValue":h[4]||(h[4]=B=>m.environment=B),placeholder:o.$t("\u8BF7\u9009\u62E9\u73AF\u5883")},{default:u(()=>[e(ke,{value:""},{default:u(()=>[i(t(o.$t("\u65E0\u73AF\u5883")),1)]),_:1}),(n(),y(ne,null,ye(de,B=>e(ke,{key:B,value:B},{default:u(()=>[i(t(B),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(De,{field:"description",label:o.$t("\u63CF\u8FF0")},{default:u(()=>[e(xe,{modelValue:m.description,"onUpdate:modelValue":h[5]||(h[5]=B=>m.description=B),placeholder:o.$t("\u8BF7\u8F93\u5165\u914D\u7F6E\u63CF\u8FF0"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(De,{field:"initialConfigKey",label:o.$t("\u521D\u59CB\u914D\u7F6E\u9879\u952E"),rules:[{required:!0,message:o.$t("\u8BF7\u8F93\u5165\u521D\u59CB\u914D\u7F6E\u9879\u952E")}]},{default:u(()=>[e(xe,{modelValue:m.initialConfigKey,"onUpdate:modelValue":h[6]||(h[6]=B=>m.initialConfigKey=B),placeholder:o.$t("\u8BF7\u8F93\u5165\u521D\u59CB\u914D\u7F6E\u9879\u952E\uFF0C\u5982 host"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(De,{field:"initialConfigValue",label:o.$t("\u521D\u59CB\u914D\u7F6E\u9879\u503C"),rules:[{required:!0,message:o.$t("\u8BF7\u8F93\u5165\u521D\u59CB\u914D\u7F6E\u9879\u503C")}]},{default:u(()=>[e(xe,{modelValue:m.initialConfigValue,"onUpdate:modelValue":h[7]||(h[7]=B=>m.initialConfigValue=B),placeholder:o.$t("\u8BF7\u8F93\u5165\u521D\u59CB\u914D\u7F6E\u9879\u503C\uFF0C\u5982 localhost"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(De,{field:"initialConfigType",label:o.$t("\u521D\u59CB\u914D\u7F6E\u9879\u7C7B\u578B")},{default:u(()=>[e(nu,{modelValue:m.initialConfigType,"onUpdate:modelValue":h[8]||(h[8]=B=>m.initialConfigType=B),placeholder:o.$t("\u8BF7\u9009\u62E9\u914D\u7F6E\u9879\u7C7B\u578B")},{default:u(()=>[e(ke,{value:"string"},{default:u(()=>[i(t(o.$t("\u5B57\u7B26\u4E32")),1)]),_:1}),e(ke,{value:"encrypted"},{default:u(()=>[i(t(o.$t("\u52A0\u5BC6")),1)]),_:1}),e(ke,{value:"int"},{default:u(()=>[i(t(o.$t("\u6574\u6570")),1)]),_:1}),e(ke,{value:"float"},{default:u(()=>[i(t(o.$t("\u6D6E\u70B9\u6570")),1)]),_:1}),e(ke,{value:"bool"},{default:u(()=>[i(t(o.$t("\u5E03\u5C14\u503C")),1)]),_:1}),e(ke,{value:"ref"},{default:u(()=>[i(t(o.$t("\u5F15\u7528")),1)]),_:1}),e(ke,{value:"object"},{default:u(()=>[i(t(o.$t("\u5BF9\u8C61")),1)]),_:1}),e(ke,{value:"array"},{default:u(()=>[i(t(o.$t("\u6570\u7EC4")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"]),e(qe,{visible:r.value,"onUpdate:visible":h[10]||(h[10]=B=>r.value=B),title:o.$t("\u5220\u9664\u914D\u7F6E"),onBeforeOk:H},{default:u(()=>[f("p",null,[i(t(o.$t("\u786E\u5B9A\u8981\u5220\u9664\u914D\u7F6E"))+" ",1),f("strong",null,t(E.value),1),i(" "+t(o.$t("\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002")),1)])]),_:1},8,["visible","title"]),e(qe,{visible:T.value,"onUpdate:visible":h[13]||(h[13]=B=>T.value=B),title:o.$t("\u5BFC\u51FA\u914D\u7F6E"),onBeforeOk:oe},{default:u(()=>[e(uu,{ref_key:"exportFormRef",ref:x,model:G,"label-align":"left","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:u(()=>[e(De,{field:"password",label:o.$t("\u52A0\u5BC6\u5BC6\u7801"),rules:[{required:!0,message:o.$t("\u8BF7\u8F93\u5165\u52A0\u5BC6\u5BC6\u7801")}]},{default:u(()=>[e(lu,{modelValue:G.password,"onUpdate:modelValue":h[11]||(h[11]=B=>G.password=B),placeholder:o.$t("\u8BF7\u8F93\u5165\u7528\u4E8E\u52A0\u5BC6\u5BFC\u51FA\u6587\u4EF6\u7684\u5BC6\u7801"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(De,{field:"confirmPassword",label:o.$t("\u786E\u8BA4\u5BC6\u7801"),rules:[{required:!0,message:o.$t("\u8BF7\u786E\u8BA4\u5BC6\u7801")},{validator:B=>B===G.password,message:o.$t("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4")}]},{default:u(()=>[e(lu,{modelValue:G.confirmPassword,"onUpdate:modelValue":h[12]||(h[12]=B=>G.confirmPassword=B),placeholder:o.$t("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),f("div",yn,[e(su,{type:"warning"},{default:u(()=>[i(t(o.$t("\u8BF7\u59A5\u5584\u4FDD\u7BA1\u60A8\u7684\u52A0\u5BC6\u5BC6\u7801\uFF0C\u5B83\u5C06\u7528\u4E8E\u89E3\u5BC6\u5BFC\u5165\u7684\u914D\u7F6E\u6587\u4EF6\u3002\u82E5\u5BC6\u7801\u4E22\u5931\uFF0C\u5C06\u65E0\u6CD5\u5BFC\u5165\u6B64\u914D\u7F6E\u3002")),1)]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible","title"]),e(qe,{visible:W.value,"onUpdate:visible":h[17]||(h[17]=B=>W.value=B),title:o.$t("\u5BFC\u5165\u914D\u7F6E"),onBeforeOk:te},{default:u(()=>[e(uu,{ref_key:"importFormRef",ref:N,model:z,"label-align":"left","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:u(()=>[e(De,{field:"file",label:o.$t("\u914D\u7F6E\u6587\u4EF6"),rules:[{required:!0,message:o.$t("\u8BF7\u9009\u62E9\u914D\u7F6E\u6587\u4EF6")}]},{default:u(()=>[e(He,{"file-list":re.value,limit:1,action:"/","auto-upload":!1,"show-file-list":!0,onChange:j},{"upload-button":u(()=>[e(O,null,{default:u(()=>[i(t(o.$t("\u9009\u62E9\u6587\u4EF6")),1)]),_:1})]),_:1},8,["file-list"])]),_:1},8,["label","rules"]),e(De,{field:"password",label:o.$t("\u89E3\u5BC6\u5BC6\u7801"),rules:[{required:!0,message:o.$t("\u8BF7\u8F93\u5165\u89E3\u5BC6\u5BC6\u7801")}]},{default:u(()=>[e(lu,{modelValue:z.password,"onUpdate:modelValue":h[14]||(h[14]=B=>z.password=B),placeholder:o.$t("\u8BF7\u8F93\u5165\u7528\u4E8E\u89E3\u5BC6\u914D\u7F6E\u6587\u4EF6\u7684\u5BC6\u7801"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(De,{field:"originalSalt",label:o.$t("\u65E7AIO\u5BC6\u94A5"),rules:[{required:!0,message:o.$t("\u8BF7\u8F93\u5165\u65E7AIO\u5BC6\u94A5")}]},{default:u(()=>[e(xe,{modelValue:z.originalSalt,"onUpdate:modelValue":h[15]||(h[15]=B=>z.originalSalt=B),placeholder:o.$t("\u8BF7\u8F93\u5165\u65E7AIO\u5BC6\u94A5"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(De,{field:"skipExisting",label:o.$t("\u5904\u7406\u5DF2\u6709\u914D\u7F6E")},{default:u(()=>[e(Se,{modelValue:z.skipExisting,"onUpdate:modelValue":h[16]||(h[16]=B=>z.skipExisting=B)},{default:u(()=>[e(be,{value:!0},{default:u(()=>[i(t(o.$t("\u8DF3\u8FC7\u5DF2\u5B58\u5728\u914D\u7F6E")),1)]),_:1}),e(be,{value:!1},{default:u(()=>[i(t(o.$t("\u8986\u76D6\u5DF2\u5B58\u5728\u914D\u7F6E")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),f("div",Fn,[e(su,{type:"warning"},{default:u(()=>[i(t(o.$t("\u5BFC\u5165\u64CD\u4F5C\u4F1A\u8986\u76D6\u540C\u540D\u914D\u7F6E\u9879\uFF0C\u8BF7\u786E\u4FDD\u60A8\u5DF2\u5907\u4EFD\u91CD\u8981\u6570\u636E\u3002")),1)]),_:1})])]),_:1},8,["model"])]),_:1},8,["visible","title"]),e(qe,{visible:v.value,"onUpdate:visible":h[20]||(h[20]=B=>v.value=B),title:o.$t("\u5BFC\u5165\u7ED3\u679C"),footer:!1,"mask-closable":!0,width:"600px"},{default:u(()=>[f("div",En,[e(iu,{status:"success",title:o.$t("\u914D\u7F6E\u5BFC\u5165\u6210\u529F")},{subtitle:u(()=>[$.skipped&&$.skipped.length>0?(n(),y("div",_n,[i(t(o.$t("\u4EE5\u4E0B"))+" ",1),f("strong",null,t($.skipped.length),1),i(" "+t(o.$t("\u4E2A\u914D\u7F6E\u5DF2\u5B58\u5728\u88AB\u8DF3\u8FC7:")),1)])):(n(),y("div",gn,t(o.$t("\u6240\u6709\u914D\u7F6E\u5747\u5DF2\u6210\u529F\u5BFC\u5165")),1))]),extra:u(()=>[e(q,null,{default:u(()=>[e(O,{onClick:h[19]||(h[19]=B=>v.value=!1)},{default:u(()=>[i(t(o.$t("\u5173\u95ED")),1)]),_:1})]),_:1})]),default:u(()=>[$.skipped&&$.skipped.length>0?(n(),y("div",hn,[e(q,{direction:"vertical",fill:""},{default:u(()=>[e(Ee,{modelValue:L.value,"onUpdate:modelValue":h[18]||(h[18]=B=>L.value=B),placeholder:o.$t("\u641C\u7D22\u8DF3\u8FC7\u7684\u914D\u7F6E"),"allow-clear":""},null,8,["modelValue","placeholder"]),e(ku,{style:{height:"300px"},"outer-class":"scrollbar-wrapper"},{default:u(()=>[e($u,{bordered:!0,data:I.value},{item:u(({item:B})=>[e(Bu,null,{default:u(()=>[i(t(B),1)]),_:2},1024)]),_:1},8,["data"])]),_:1})]),_:1})])):ie("",!0)]),_:1},8,["title"])])]),_:1},8,["visible","title"])])}}});const Pn=Ie(Cn,[["__scopeId","data-v-765b308d"]]);export{Pn as default};
